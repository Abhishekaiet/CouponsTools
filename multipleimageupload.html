<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	  
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Web Studio</title>
	
	<!-- Being Font Aewesome version 5.1.0 CDN calling fonts on page -->
 
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="js/responsive.css">
	  <link rel="stylesheet" type="text/css" href="css/coupons&deals.css">
	  <link rel="stylesheet" type="text/css" href="css/creatingcoupons.css">
	  <link rel="stylesheet" type="text/css" href="css/creatingpage.css">
	
				<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	   <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
	
	  
<!--	  <script src="jcrop/jquery.Jcrop.min.js"></script>-->
      <script src="jcrop/jquery.Jcrop.js"></script>
      <script src="jcrop/jcrop.js"></script>
	  
<!--	  <script src="jcrop/jcrop2.js"></script>-->
	  
	  <script src="jcrop/jcrop3.js"></script>
	  <script src="jcrop/jcrop4.js"></script>
	  
	  
	  
	<link rel="stylesheet" href="jcropcss/jquery.Jcrop.css" type="text/css" />
<!--<link rel="stylesheet" href="demo_files/demos.css" type="text/css" />-->
<!--<link rel="stylesheet" href="../css/jquery.Jcrop.css" type="text/css" />-->
	  
	  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<link rel="stylesheet" type="text/css" href="css/stylesheet.css" />	<!-- Css Stylesheet Contolling page Design-->
  
  </head>
  <body>
  
 <div class="container-fluid">
 <div class="row">
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid" style="padding-right: 20px">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#" style="
    padding-left: 38%;"><img src="img/logo_community.png" style="width: 250px; height: 32px; margin-top: -5px;"></a>
            </div>

			
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
               
                <ul class="nav navbar-nav navbar-right">
				<li><a href="#" style="color:#FFFFFF;"></a></li>
				<li style="text-align: right; padding-right: 40px;"><a href="index.html" style="color:#FFFFFF;"><img src="img/homelogo.png" style="width: 14%;"></a></li>
					
                   
					
                </ul>
				
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
	 </div>
	  </div>

	 
	 <style>
		 
		 .input-search
		 {
			width: 60%;
    height: 44px;
    margin-top: 12px;
    border-radius: 20px;
    padding-left: 17px;
    border: none;
    background: #e0dfdf;
			 text-align: left;
		 }
		.bodysearch
		 {
			        width: 101%;
    height: 109vh;
    background: white;
    position: absolute;
    z-index: 3;
    padding: 0px;
    margin: 0px;
    margin-left: -28px;
    /* top: 56px; */
    text-align: center;
			 
		 }
	 
	 </style>

<div class="container-fluid">
	 
	<div class="row">
	
	<div class="col-sm-6">
		
		<butto class="cupons" onclick="mycupons()" id="cubtcolor">
		<img src="img/Icons/cuponslight.png" id="cuposnimage" onClick="mycupons()">
		</butto>
		
		<butto class="deals" onclick="mydeal()" id="btncolor">
		<img src="img/Icons/dealsoff.png" onClick="myfunction" id="dealsimage">
		</butto>
		
	</div>
		
		
		
		<div class="col-sm-6" align="left">
		
		 <butto class="preview">
		Apply changes
		</butto>
		
		<butto class="applay">
		Preview changes
		</butto>
		
		
	</div>	
	</div><!--Row end-->
    </div><!--Container End-->
	 </div>
	
	  <style>
		  
	.loader
		  {
			  width: 100%;
    height: 134vh;
    position: absolute;
    background:rgba(0,0,0,0.6);
	display: none;
    z-index: 10;
    top: 0;
			  text-align: center;
		  }
		  
/*
		  .thankyou
		  {
			      width: 64%;
    height: 80vh;
    position: absolute;
    background: #35a0d4;
    z-index: 10;
    top: 12%;
    left: 19%;
    text-align: center;
		  }
*/
		  
		  #dynic-dlimagelist
		  {
			  list-style: none;
		  }
		  
	  </style>
	
<!--
	<div class="thankyou">
		
	COUPONS HAS BEEN CREATED
	
	</div>
-->
	
	
	<div class="loader" id="loader">
	
		<img src="img/loader1.gif" style="width: 8%;
    margin-top: 37%;">
	
	</div>
	
	
	<!--	This is modal for  deal image-->

	<div class="callingtoption" id="deal-image-modal">
	
		<div class="modal-chooption">
		<div class="closexoptn" id="close-dlimagemodal">x</div>
		<div class="optionbtn">
			
			<span class="chfrocom">Choose from computer <i class="fa fa-desktop icon-computer"></i></span>
			 <input type="file"  name="image"  id="dlimage" class="hide_file1" accept="image/*" onchange="loadFiledlimage(event)">
		
			</div>
			
			<br>
			
		<div class="optionbtn2" id="openDLimagemodal">
			<span class="chfrocom2">Choose from web <i class='fas fa-volleyball-ball icon-computer'></i></span>
		</div>
			
		</div>
			
	</div>
	
	
	
	<script>
	
		document.getElementById('openDLimagemodal').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('image-deal-web-modal');
			
			cropmodalclose.style.display="block";
			
		});
	
	</script>
	
	
	<!--	This is modal for deals logo 555-->

	<div class="callingtoption" id="deal-logo-modal">
	
		<div class="modal-chooption">
		<div class="closexoptn" id="close-delogomodal">x</div>
		<div class="optionbtn">
			
			<span class="chfrocom">Choose from computer<i class="fa fa-desktop icon-computer"></i></span>
			 <input type="file"  name="image"  id="dealogo" class="hide_file1" accept="image/*" onchange="loadFiledlogo(event)">
			
		</div>
			<br>
			
		<div class="optionbtn2" id="openDLlogomodal">
			<span class="chfrocom2">Choose from web <i class='fas fa-volleyball-ball icon-computer'></i></span>
		</div>
			
		</div>
			
	</div>
	
	
	
	
	<div class="callingtoption" id="close-chosoptn">
	
		<div class="modal-chooption">
		<div class="closexoptn" id="closemodalchose">x</div>
		<div class="optionbtn">
			
			<span class="chfrocom">Choose from computer <i class="fa fa-desktop icon-computer"></i></span>
			<input type="file"  name="image"  id="filelogo" accept="image/*" onchange="loadFile1(event)" class="hide_file1" multiple>
			 
			
		</div><br>
			
		<div class="optionbtn2" id="openwebsearch">
			
			<span class="chfrocom2">Choose from web <i class='fas fa-volleyball-ball icon-computer'></i></span>
		</div>
			
		</div>
			
	</div>
	
	
	
	<div class="callingtoption" id="close-image-coupons">
	
		<div class="modal-chooption">
		<div class="closexoptn" id="close-imagecoupons">x</div>
		<div class="optionbtn">
			
			<span class="chfrocom">Choose from computer <i class="fa fa-desktop icon-computer"></i></span>
			 <input type="file"  name="image"  id="files" class="hide_file1" accept="image/*" onchange="loadFile(event)" multiple>
			
		</div><br>
			
		<div class="optionbtn2" id="openmodalwebsearch">
			<span class="chfrocom2">Choose from web <i class='fas fa-volleyball-ball icon-computer'></i></span>
		</div>
			
		</div>
			
	</div>
	
	

	
	<!--	End here This is modal for deals logo 555-->

	
<!--This is web modal being here-->
	<div class="callingtoption" id="closewebsearch">
	
		<div class="modal-chooption" style="background: white;">
		<div class="closexoptn1_web" id="closewebmodal" style="color: black;">x</div>
		
			
			<div class="input_searh_web">
			
				<input type="text" style="width: 65%; padding-left: 14px;
    height: 39px;" placeholder="Search logo image here" id="searhdata">
				
				<button type="button" id="imagesearch" style="width: 20%;
    height: 39px;
    background: #00ceff;
    border: none;
    color: white;
	font-size: 17px;">Search</button>
			
			</div>
			
			<div class="results_imagesearch">
			
				 <ul id="dynamic-list1"></ul>
			
			</div>
			
			
			
		</div>
			
	</div>
<!--this is web modal close here-->
	
	

	<!--This is web modal being here-->
	<div class="callingtoption" id="closewebsearch2">
	
		<div class="modal-chooption" style="background: white;">
		<div class="closexoptn1_web" id="closewebmodal2" style="color: black;">x</div>
		
			
			<div class="input_searh_web">
			
				<input type="text" style="width: 65%; padding-left: 14px;
    height: 39px;" placeholder="Search image here" id="searhdata2">
				
				<button type="button" id="imagesearch2" style="width: 20%;
    height: 39px;
    background: #00ceff;
    border: none;
    color: white;
	font-size: 17px;">Search</button>
			
			</div>
			
			<div class="results_imagesearch">
			
				 <ul id="dynamic-list22"></ul>
			
			</div>
			
			
			
		</div>
			
	</div>
<!--this is web modal close here-->
	
	
	
	
	<!--This is web modal being here-->
	<div class="callingtoption" id="logo-deal-web-modal">
	
		<div class="modal-chooption" style="background: white;">
		<div class="closexoptn1_web" id="close-websearchmodal" style="color: black;">x</div>
		
			
			<div class="input_searh_web">
			
				<input type="text" style="width: 65%; padding-left: 14px;
    height: 39px;" placeholder="Search image here" id="dllogosearch">
				
				<button type="button" id="dl-logo-submit" style="width: 20%;
    height: 39px;
    background: #00ceff;
    border: none;
    color: white;
	font-size: 17px;">Search</button>
			
			</div>
			
			<div class="results_imagesearch">
			
				 <ul id="dynic-dllogolist"></ul>
			
			</div>
			
			
			
		</div>
			
	</div>
<!--this is web modal close here-->
	

	
	<!--This is web image modal being here-->
	<div class="callingtoption" id="image-deal-web-modal">
	
		<div class="modal-chooption" style="background: white;">
		<div class="closexoptn1_web" id="close-websearchimage" style="color: black">x</div>
		
			
			<div class="input_searh_web">
			
				<input type="text" style="width: 65%; padding-left: 14px;
    height: 39px;" placeholder="Search image here" id="dlimagesearch">
				
				<button type="button" id="dl-image-submit" style="width: 20%;
    height: 39px;
    background: #00ceff;
    border: none;
    color: white;
	font-size: 17px;">Search</button>
			
			</div>
			
			<div class="results_imagesearch">
			
				 <ul id="dynic-dlimagelist"></ul>
			
			</div>
			
			
			
		</div>
			
	</div>
<!--this is web modal close here-->
	
	
	
	<!--croppp modal-->
	
	<style>
		
		
		#dynamic-list1
		  {
			  
			  list-style: none;
		  }
		.results_imagesearch
		{
			
			    width: 88%;
    height: 84%;
    margin-left: 7%;
			overflow: scroll;
			
		}
		
		#dynamic-list22
		  {
			  
			  list-style: none;
		  }
		
		#dynic-dllogolist
		  {
			  
			  list-style: none;
		  }
		.results_imagesearch
		{
			
			    width: 88%;
    height: 84%;
    margin-left: 7%;
			
		}
		
		.input_searh_web
		{
		     width: 72%;
    height: 45px;
    margin-top: 21px;
    margin-left: 138px;
    top: 1;
    background:;
		}
		
		.closexoptn
		{
			        float: right;
    font-size: 27px;
    margin-right: 13px;
    color: white;
    margin-right: 31%;
    margin-top: 123px;
		}
		
		.closexoptn1_web
		{
			            float: right;
    font-size: 27px;
    margin-right: 13px;
		}
		
		.modal-chooption
		{
			    width: 66%;
    height: 51%;
    top: 13%;
    text-align: center;
    left: 17%;
    position: absolute;
    background:none;
		
		}
		
		.icon-computer
		{
			    font-size: 24px;
    margin-left: 13px;
			
		}
	
		.chfrocom
		{
			font-size: 21px;
    position: absolute;
    color: white;
    margin-top: 15px;
    left: 38%;
		}
		.chfrocom2
		{
			font-size: 21px;
    position: absolute;
    color: white;
    margin-top: 15px;
    left: 40%;
			
		}
		
		.optionbtn
		{
			width: 28%;
    height: 60px;
    background-image: linear-gradient(to right, #36b5bb , black);
    margin-top: 18%;
    margin-left: 36%;
		}
		
		.optionbtn2
		{
		width: 24%;
    height: 60px;
 background-image: linear-gradient(to right, #36b5bb , black);
    margin-left: 38%;
		}
		
		.callingtoption
		{
			text-align: center;
			width: 100%;
			height: 137%;
			top: 0px;
			display: none;
			background:rgba(0,0,0,0.7);
			position: absolute;
			z-index: 10;
		}
		
		.cropmodal
		{
		    width: 100%;
    left: 10;
    height: 100vh;
			display: none;
    /* height: 100%; */
    top: 0;
    position: absolute;
    z-index: 10;
    background: rgba(0,0,0,0.7);
			text-align: center;
			
		}
		
		.cropmodalcontent
		{
			
			width: 69%;
    left: 15%;
    height: 76%;
    position: absolute;
    top: 11%;
    background: blue;
				
		}
		.imagecroppart
		{
			
			    width: 73%;
    height: 100%;
    background:white;
			float: left;
			
			
		}
		
		.buttonsright
		{
			width: 27%;
			height: 100%;
			background: white;
			float: left;
		}
		
.leftsupport
		{
			   width: 7%;
    height: 66%;
    /* float: left; */
    background:;
    float: left;
		}
	
	</style>
	
	
	
	
	
	<div class="cropmodal" id="cropmodal">
	
		<p style="  color: white;
    float: right;
    font-size: 50px;" id="closecropmodal">X</p>
		
		<div class="cropmodalcontent">
			
			<div class="imagecroppart">
				<br>
				<br><br>
				<br>
				
				<div class="leftsupport"></div>
				<div id="views" style="float: left;"></div>
				
			</div>
		
			<div class="buttonsright">
				
				<button id="cropbutton" type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 33%;
    color: #000000;
    border-radius: 30px;">Apply Crop</button>
				
				
				<button type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 11%;
    border-radius: 30px;
    color: #000000;">Reset</button>
				
				<button type="button" style="    width: 67%;
    height: 47px;
    font-size: 26px;
    /* background: #1289e0; */
    /* border: 1px solid; */
    background: none;
    border: none;
    margin-top: 99%;
    border-radius: 18px;
    background: #d67208;
    color: #d8d4d4;" id="submitcropp">Submit</button>
				
			</div>
			
		</div>
		
		
	</div>
	
	<div class="cropmodal" id="cropmodalcallingimage">
	
		<p style="  color: white;
    float: right;
    font-size: 50px;" id="closecropmodalbb">X</p>
		
		<div class="cropmodalcontent">
			
			<div class="imagecroppart" style="width: 100%;">
				<br>
				<br><br>
				<br>
				
				
				<ul id="listofmultiimage">
				<li id="gallery"></li>
				</ul>
				
			</div>

			
		</div>
		
		
	</div>
	
	
	<div class="cropmodal" id="cropmodal2">
	
		<p style="  color: white;
    float: right;
    font-size: 50px;" id="closecropmodal">X</p>
		
		<div class="cropmodalcontent">
			
			<div class="imagecroppart">
				<br>
				<br><br>
				<br>
				
				<div class="leftsupport"></div>
				<div id="views2" style="float: left;"></div>
				
			</div>
		
			<div class="buttonsright">
				
				<button id="cropbutton2" type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 33%;
    color: #000000;
    border-radius: 30px;">Apply Crop</button>
				
				
				<button type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 11%;
    border-radius: 30px;
    color: #000000;">Reset</button>
				
				<button type="button" style="    width: 67%;
    height: 47px;
    font-size: 26px;
    /* background: #1289e0; */
    /* border: 1px solid; */
    background: none;
    border: none;
    margin-top: 99%;
    border-radius: 18px;
    background: #d67208;
    color: #d8d4d4;" id="submitcropp2">Submit</button>
				
			</div>
			
		</div>
		
		
	</div>
	
	
	
	<div class="cropmodal" id="cropmodal3">
	
		<p style="  color: white;
    float: right;
    font-size: 50px;" id="closecropmodal3">X</p>
		
		<div class="cropmodalcontent">
			
			<div class="imagecroppart">
				<br>
				<br><br>
				<br>
				
				<div class="leftsupport"></div>
				<div id="views3" style="float: left;"></div>
				
			</div>
		
			<div class="buttonsright">
				
				<button id="cropbutton3" type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 33%;
    color: #000000;
    border-radius: 30px;">Apply Crop</button>
				
				
				<button type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 11%;
    border-radius: 30px;
    color: #000000;">Reset</button>
				
				<button type="button" style="    width: 67%;
    height: 47px;
    font-size: 26px;
    /* background: #1289e0; */
    /* border: 1px solid; */
    background: none;
    border: none;
    margin-top: 99%;
    border-radius: 18px;
    background: #d67208;
    color: #d8d4d4;" id="submitcropp3">Submit</button>
				
			</div>
			
		</div>
		
		
	</div>
	
	
	<div class="cropmodal" id="cropmodal4">
	
		<p style="  color: white;
    float: right;
    font-size: 50px;" id="closecropmodal4">X</p>
		
		<div class="cropmodalcontent">
			
			<div class="imagecroppart">
				<br>
				<br><br>
				<br>
				
				<div class="leftsupport"></div>
				<div id="views4" style="float: left;"></div>
				
			</div>
		
			<div class="buttonsright">
				
				<button id="cropbutton4" type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 33%;
    color: #000000;
    border-radius: 30px;">Apply Crop</button>
				
				
				<button type="button" style="width: 67%;
    height: 47px;
    font-size: 20px;
    /* background: #1289e0; */
    border: 1px solid;
    background: none;
    margin-top: 11%;
    border-radius: 30px;
    color: #000000;">Reset</button>
				
				<button type="button" style="    width: 67%;
    height: 47px;
    font-size: 26px;
    /* background: #1289e0; */
    /* border: 1px solid; */
    background: none;
    border: none;
    margin-top: 99%;
    border-radius: 18px;
    background: #d67208;
    color: #d8d4d4;" id="submitcropp4">Submit</button>
				
			</div>
			
		</div>
		
		
	</div>
	
	<script>
	
				
		
		
		
		
		document.getElementById('closecropmodal3').addEventListener('click', function (){
			
			var cropmodal3 = document.getElementById('cropmodal3');
			
			cropmodal3.style.display="none";
			
		});
		
		
		document.getElementById('closecropmodalbb').addEventListener('click', function (){
			
			var cropmodalcallingimage = document.getElementById('cropmodalcallingimage');
			
			cropmodalcallingimage.style.display="none";
			
		});
		
		
		document.getElementById('openDLlogomodal').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('logo-deal-web-modal');
			
			cropmodalclose.style.display="block";
			
		});
		
		
		
		document.getElementById('close-websearchmodal').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('logo-deal-web-modal');
			
			cropmodalclose.style.display="none";
			
		});
		
		
//		This is opening modla web button click 
		
		document.getElementById('openmodalwebsearch').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('closewebsearch2');
			
			cropmodalclose.style.display="block";
			
		});
		
//		This is opening modla web button click 
		
		document.getElementById('openmodalwebsearch').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('closewebsearch2');
			
			cropmodalclose.style.display="block";
			
		});
		
		document.getElementById('closewebmodal2').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('closewebsearch2');
			
			cropmodalclose.style.display="none";
			
			var cropmodalclose = document.getElementById('close-image-coupons');
			
			cropmodalclose.style.display="none";
			
			
		});
		
		
		document.getElementById('close-websearchimage').addEventListener('click', function (){
			
			var dealimagwweb = document.getElementById('image-deal-web-modal');
			
			dealimagwweb.style.display="none";
			
			var cropmodalclose = document.getElementById('close-image-coupons');
			
			cropmodalclose.style.display="none";
			
			
		});
		
		//		This is opening modla web button click 
		
		
		
		document.getElementById('closecropmodal').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('cropmodal');
			
			cropmodalclose.style.display="none";
			
		});
		
		
		
		document.getElementById('closemodalchose').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('close-chosoptn');
			
			cropmodalclose.style.display="none";
			
		});
		
		document.getElementById('openwebsearch').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('closewebsearch');
			
			cropmodalclose.style.display="block";
			
		});
		
		document.getElementById('closewebmodal').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('closewebsearch');
			
			cropmodalclose.style.display="none";
			
			
			var cropmodalclose = document.getElementById('close-chosoptn');
			
			cropmodalclose.style.display="none";
			
			var cropmodalclose = document.getElementById('close-image-coupons');
			
			cropmodalclose.style.display="none";
			
		});
		
		
		
	</script>
	<!--croppp modal-->
	
	
	
	<div class="container-fluid">
	  
		<div class="row">
		
		
			<div class="col-sm-3">
			
				<input type="text" placeholder = "Search for coupons" style="width: 100%;
    height: 39px;
    margin-top: 21px;
    border: none;
    padding-left: 10px;" id="searchtextfild" onKeyUp="myFunction()">
				
				<input type="text" placeholder = "Search for deals " style="width: 100%;
    height: 39px;
    margin-top: 21px;
    border: none;
    padding-left: 10px; display: none;" id="searchdeals" onKeyUp="myFunction2()">
				
				
<!--
				<button type="button" class="searchbtn" onClick="searchtext()">
				
					
				
					
					<img src="img/ch-list/search-channel-icon.png">
					
		
					
					</button>
-->
				
				
				

				<style>
				
				.searchbtn
					{
						width: 18%;
    margin-left: 1px;
    height: 40px;
    position: absolute;
    margin-top: 21px;
						
					}
					.searchbtn img
					{
						    width: 28%;
    margin-top: 0px;
    height: 20px;
					}
					
				</style>
				<div class="filter">
				
				
<!--
					<select class="select_fil">
    <option value="0">Filter</option>
    <option value="1">Audi</option>
    <option value="2">BMW</option>
    <option value="3">Citroen</option>
    <option value="4">Ford</option>
    <option value="5">Honda</option>
    <option value="6">Jaguar</option>
    <option value="7">Land Rover</option>
    <option value="8">Mercedes</option>
    <option value="9">Mini</option>
    <option value="10">Nissan</option>
    <option value="11">Toyota</option>
    <option value="12">Volvo</option>
  </select>
-->
					
				
<!--
					<select class="select_sort">
    <option value="0">Sort By</option>
    <option value="1">Audi</option>
    <option value="2">BMW</option>
    <option value="3">Citroen</option>
    <option value="4">Ford</option>
    <option value="5">Honda</option>
    <option value="6">Jaguar</option>
    <option value="7">Land Rover</option>
    <option value="8">Mercedes</option>
    <option value="9">Mini</option>
    <option value="10">Nissan</option>
    <option value="11">Toyota</option>
    <option value="12">Volvo</option>
  </select>
-->
				
				</div>
				
				
<!--
				<div>
    <section>
        <table>
            <tr>
            <td></td>
            </tr>
            <tr>
            <td></td>
            </tr>
            <tr>
            <td></td>
            </tr>
            <tr>
            <td></td>
            </tr>
            <tr>
            <td></td>
            </tr>
        </table>
    </section>  
</div>
-->
				
				<style>
				
					#couponsimage
	{
		list-style:none;
	}
					
					#couponsimagedeal
	{
		list-style:none;
		display: none;
	}
					
					#cupsearch
	{
		list-style:none;
	}
					
				#listsearch:focus
					{
						
						outline: none;
						box-shadow: 2px 2px 2px 2px black;
						background: white;

					}
					
				</style>
				
<!--				<ul id="dynamic-list1"></ul>-->
				<div class="couns_search">
				
					<ul id="couponsimage"></ul>
					<ul id="cupsearch"></ul>
					<ul id="couponsimagedeal"></ul>
				</div>
			
			
			</div>
		<br>

		
			
			<div class="col-sm-9">
			
				<div class="bodysearch" id="bodysearch1">
	 
		 <img src="img/logo_community.png"  style="width: 40%;
    margin-top: 24%;">
		 
					
<!--		 <button type="text" class="input-search" id="myBtn" onClick="initMap()">Search place by name or address...</button>-->
					
        
		 <input type="text" class="input-search" id="listsearch" placeholder="Search place by name or address..." list="searchresults" autocomplete="off">
					
		 <datalist id="searchresults"></datalist>
	 </div>
	 
				
<!--
				Being Deal and cupons modal
				<div class="cuonsaddQRCODE" id="cuponscodeQR">
				
					
					<div class="qrimage">
				
		<div class="custom-file-upload" id="kliendi_kaart_olemas_p">
   
<label for="file-upload" class="custom-file-upload2">
	
    <img src="images/img_234957.png" style="width: 35%; margin-top: 27px; display:none;"><br> Add your * image here
								
	Max size 1200X1200
	
</label>
<input id="file-upload" type="file"  name="image">
</div>
						
					</div>
					<h2 align="center" style="color: white;">OR</h2>
					<div class="addcupancode">
					
						<input type="text" placeholder="Add coupons code here" style="width: 100%;
    height: 82px;
    /* border: 36px; */
    border-radius: 26px;
    padding-left: 24px;
    font-size: 26px;" class="placehold" id="couponscode">
					
					</div>
					<h2 align="center" style="color: white;">AND</h2>
					<div class="addlink">
					
						<input type="text" placeholder="Coupons's image link" style="width: 100%;
    height: 82px;
    /* border: 36px; */
    border-radius: 26px;
    padding-left: 24px;
    font-size: 26px;" class="placehold" id="linkpest">
					
					</div>
					
					<button type="button" class="btn_proceed">CONFIRM</button>
			</div>
-->
				
				<!--Ends coupns qr code -->
				
				<style>
					
					.chosebtn
					{
						padding:5px 10px;
  background:#ccc;
   padding-bottom: 94px;
  border:1px solid #ccc;
  position:relative;
  color:#fff;
  border-radius:2px;
  text-align:center;
  float:left;
  cursor:pointer
					}
				
					.hide_file {
    position: absolute;
    z-index: 2;
    opacity: 0;
    cursor: pointer;
    right: 0;
    top: 0;
    height: 100%;
    font-size: 24px;
    width: 100%;
    
}
	
					.hide_file1 {
    z-index: 2;
    opacity: 0;
    cursor: pointer;
    right: 0;
    top: 0;
    height: 100%;
    font-size: 24px;
    width: 100%;
    
}
					
					
					.inconclick
					{
						width: 100%;
    height: 100%;
    position: absolute;
    z-index: 2;
    background:none;
						text-align: right;
						
					}
					
					
				</style>
				<div class="maincontainer" id="mainconainercup">
				<div class="cupons_intract">
				
					<div class="cupons_intact1" id="couponsimage">
					
						<div class="cupons_intact2">
						
							<div class="addlogo">
								
						
								
								<img id="myImg" src="compman.gif" style="z-index: 2;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    position: absolute; object-fit:scale-down; visibility: hidden;">
								<style>
								.showoption
									{
										width: 100%; 
										height: 100%; 
/*										background:rgba(0,0,0,0.5);*/
										position: absolute;
										top:0px;
										z-index: 10;
									}
									
								</style>
								
								<div class="inconclick">
									<p style="text-align: center;
    margin-top: 13px;" id="selectlogotext">Select logo image</p>
									
									<img src="img/camera.png" style="width: 20%;
    margin-top: 7px;
    margin-right: 10px;
    position: absolute;
    left: 44px;
    bottom: 7px;" id="imageiconlogo">
									
									<div class="showoption" id="calloption"></div>
<!--									<input type="file"  name="image"  id="filelogo" accept="image/*" onchange="loadFile1(event)" class="hide_file">-->
	   
									<img id="output1" src="" style="width: 100%;
    position: absolute;
    height: 100%;
    float: left;
    left: 0px;
	z-index: -2;
	visibility: hidden;																
    top: 0;
    border: none;
    object-fit: contain;">
								</div>
								
<!--
								
									

-->
								<script>
									
									document.getElementById('calloption').addEventListener('click', function (){
										
										
									var block_chsoption = 	document.getElementById('close-chosoptn');
										block_chsoption.style.display="block";
										
									});
									
								</script>
								
<!--
   <div class="chosebtn">
	   
	   <img src="img/camera.png" style="width: 35%; margin-top: 7px;"><br> Add Your logo Here
								Max Size 500X500
<input type="file"  name="image"  id="files" accept="image/*" onchange="loadFile(event)" class="hide_file">
	   
								</div>
-->
								

								
							</div>
							
							<!--//onChange='inform()'-->
							
							<div class="comname">
							
								<input type="text" placeholder="Company name here*" class="inpt" style="width: 100%;
    height: 59px;
    padding-left: 10px;
    border: none; font-size:33px;" id="entcname" value="">
								
							</div>
							
							
							<div class="offdescript">
							
								
								<textarea cols="5" rows="4" style="width: 100%; resize:vertical" class="offerdes" placeholder="Offer description here *" id="printdes"></textarea>
								
								
							</div>
							<div class="offer" id="catrogires">
								
								<textarea placeholder="Your offer here *" class="inpt_offer" style=" width: 98%; height: 121px; padding-left: 10px; border: none;margin-left: 0;margin-top: 10px; background: none; color: white; resize:vertical" id="printoffer"></textarea>
								
							</div>
							<style>
								
									.imagescoupons
									{
										width: 100%;
    height: 100%;
/*    background: rgba(0,0,0,0.5);*/
    position: absolute;
    top: 0px;
    left: 0;
    z-index: 2;
									}
									
								</style>
							
							<div class="adding_image">
				
								
								<img src="img/camera.png" style="    width: 8%;

    position: absolute;
    left: 48%;
    top: 72%;
    bottom: 16%;
    z-index: 4;
    bottom: 7px; visibility: hidden;" id="cmraeditlogo">
									
									<div class="imagescoupons" id="images_coupons">
								
								<img id="output" src="" style="width: 100%;
    position: absolute;
    height: 100%;
    float: left;
    left: 0px;
	visibility: hidden;
	z-index: -2;
    top: 0;
    border: none;
    object-fit: contain;
    background: white;">
								  
								
								   </div>

									<img src="img/camera.png" style="width: 35%; margin-top: 40px;"><br> <span class="textdealimage">Add your image here</span>
					
								
								
								<p style="font-size: 12px;
										  
    margin-top: 115px; display: none; float: left; margin-left: 22%;" id="datepicc">This coupon will expire on <span id="dateon" style="margin-left: 4px; float: right;"></span></p>
								
								<input type="text" placeholder="Choose expiry date" id="expiraydate2" onchange="handlercup(event);" style="    height: 19px;
    width: 36%;
    margin-top: 13px;
    position: absolute;
    left: 37%;
    bottom: -21px;
    padding-bottom: 15px;
    font-size: 37px;
    border: none; float:right;">
								
							</div>
						
						</div>
					
					</div>
					
					
				</div>
			
		<br>
				<h2 style="color: white; margin-top: 10px;">Coupons details <span id="modalcalling"><img src="img/location.png" style="width: 50px;"></span></h2>
					
			<div class="formdeal">
				
				<input type="text" placeholder="Company name here *" class="input_form" id="entcname1" value="">
				<input type="text" placeholder="Your offer here *" class="input_form" id="offer" value="">
				<input type="text" placeholder="Your description here *" class="input_form" id="entdesc" value="">
				</div>
					
					
			<div class="formdeal">
				
				
				<input type="text" placeholder="Category *" class="input_form" id="category" value="">
				
<!--
				<select class="select_catego" id="select">
					
    <option value="0">Select category</option>
    <option value="food">Food</option>
    <option value="drink">Drink</option>
    <option value="sports">Sports</option>
    <option value="schools">Schools</option>
    
   
  </select>
-->
				<style>


					#expiraydate2:focus
					{
						outline: none;
						
					}
				</style>
				
				
				<script>
		
		document.getElementById('images_coupons').addEventListener('click',function(){
			
			
			var imagecoupons_coupons = document.getElementById('close-image-coupons');
			    imagecoupons_coupons.style.display="block";
			
			
			document.getElementById('close-imagecoupons').addEventListener('click',function(){
				
				var imagecoupons_couponsclose = document.getElementById('close-image-coupons');
			    imagecoupons_couponsclose.style.display="none";
			
			});
			
			
			document.getElementById('openmodalwebsearch').addEventListener('click',function(){
				
				var imagecoupons_couponsclose = document.getElementById('closewebsearch2');
			    imagecoupons_couponsclose.style.display="block";
			
			});
			
																   
																   });
		
	</script>
				
				
				<script>
					
//					$("files").change(function() {
//
//	alert('ok');
//	
//	
//var jcropmodal = document.getElementById('cropmodal');
//jcropmodal.style.display = "block";
//	
//});550055
					
					
				$(function() {
    $( "#expiraydate" ).datepicker({ minDate: 0});
	
					
					
  });
					$(function() {
						
    $( "#delexpirydate" ).datepicker({ minDate: 0});
			
						
					
  });
					
					$(function() {
						
    $( "#expiraydate2" ).datepicker({ minDate: 0});
			
						
					
  });
					
		
					$(function() {
						
    $( "#deldate" ).datepicker({ minDate: 0});
			
						
					
  });

				
					
							
					function handlerdel(e){
					
						document.getElementById('dateon1').innerHTML = e.target.value;
					    document.getElementById('delexpirydate').value = e.target.value;
					
						 var dateon1 = document.getElementById('dateon1');
					    dateon1.style.display="block";
						
					 var detetoo = document.getElementById('deldateshow');
					    detetoo.style.display="block";
					
					    var datapicq = document.getElementById('deldate');
					    datapicq.style.display="none";
//				
}	
		
//					
					function handlercup(e){
					
						document.getElementById('dateon').innerHTML = e.target.value;
					    document.getElementById('expiraydate').value = e.target.value;
					
					 var detetoo = document.getElementById('datepicc');
					    detetoo.style.display="block";
					
					    var datapicq = document.getElementById('expiraydate2');
					    datapicq.style.display="none";
//				
}	
					
					
		
					
				function handler(e){
					
						document.getElementById('dateon').innerHTML = e.target.value;
					
					
					
					 var detetoo = document.getElementById('datepicc');
					    detetoo.style.display="block";
					
					    var datapicq = document.getElementById('expiraydate2');
					    datapicq.style.display="none";
					
					
}	
			
					function delhandler(e){
					
						document.getElementById('dateon1').innerHTML = e.target.value;
//					
					 var detetoo = document.getElementById('dateon1');
					    detetoo.style.display="block";
//					
					    var datapicq = document.getElementById('deldateshow');
					    datapicq.style.display="block";
					
					
}	
//					
						
					
				</script>
				
				<input type="text"  class="input_form" placeholder="Expiry date" id="expiraydate" onchange="handler(event);" value="">
				<input type="text" placeholder="Terms & condition here *" class="input_form" id="tersconditons" required value="">
				<input type="text" placeholder="address *" class="input_form" style="margin-left: 25px; margin-top: 12px;" id="address1" value="">
				<input type="text" placeholder="Zipcode *" class="input_form" style="margin-left: 31px; margin-top: 12px;" id="zipcode" required value="">
				<input type="text" placeholder=" *" class="input_form placeid_field" style="margin-left: 31px; margin-top: 12px; visibility: hidden;" id="editplaceid" value="">
			
				<input type="text" placeholder="Add coupons code here *" class="input_form" style="margin-left: 25px; margin-top: 12px;" id="qrcode" value="">
				<span style="margin-left: 14%;
    margin-top: 12px;
    color: white;
    font-size: 30px;
    margin-right: 14%;" class="ortext">OR</span>
				
				<input type="text" placeholder="Coupons's image link *" class="input_form" style="margin-left: 31px; margin-top: 12px;" id="imagelink" value="">
				<input type="text" id="imageurl11" value="" style="visibility: hidden;">
				<input type="text" id="logourl11" value="" style="visibility: hidden;">
				<input type="text" id="selectapiimage" value="" style="position: absolute; visibility: hidden;">
				<select id="priority" style="    width: 30%;
    margin-top: 20px;
    border-radius: 25px;
    margin-left: -330px;">
					<option>Priority Values</option>
  <option value="0">0</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
					<option value="6">6</option>
					<option value="7">7</option>
					<option value="8">8</option>
					<option value="9">9</option>
</select>
				
				<select id="trfl" style="width: 30%;
    margin-top: 20px;
    border-radius: 25px;
    margin-left: 35%;">
					<option>PROMOTED SELECT</option>
  <option value="true">TRUE</option>
  <option value="false">FALSE</option>
</select>
				
			</div>

				<button type="button" class="btn_proceed bntconf" onClick="submitdata()" id="confim_copons" style="margin-left: 35%;">CONFIRM</button>
				
				<button type="button" class="btn_proceed" onClick="updatesubmit()" style="display: none;" id="updatebtn">UPDATE</button>
					<button type="button" class="btn_proceed2" onClick="addnewsubmit()" style="display: none;" id="addnewbtn">Add New One</button>
			</div>
				
			<style>
						
				.bntconf
				{
					margin-left: : 36%!important;
				}
				
				.btn_proceed2
		  {
			      background: #5cc8fd;
    width: 27%;
    height: 46px;
	margin-top:182px;
    color: white;
    border: none;
    border-radius: 20px;
			  
    font-size: 18px;
    font-weight: 600;
		  }

				
				.cupons_intact1
		  {
			 width: 94%;
    height: 435px;
    background:url("img/Food_&_Drinks.png");
    margin-left: 31px;
			  background-size:100% 100%;
			  position: relative;
			  
		  }
				
				
				
				 ::placeholder {
  color: black;
  opacity: 1; /* Firefox */
					 
					 
		
}

				.dlgetmv
				{
					    width: 100%;
    height: 100%;
/*    background: rgba(0,0,0,0.5);*/
					position: absolute;
					    z-index: 1;
				}

				</style>	
				

				
				<!--Main Container Deal-->
			<div class="maincontainerdeal" id="maincondeal">
				
				<div class="leftpos">
				
					<div class="dealimage">
						
						

						<div class="dealimageupload">
							<div class="dlgetmv" id="dlgetmodal"></div>
							<img src="img/camera.png" style="width: 35%; margin-top: 7px;"><br> <span style="font-size: 33px;">Add your image Here max-size 1200X1000</span>
									
<!--<input type="file"  name="image"  id="dlimage" accept="image/*" onchange="loadFile3(event)" class="hide_file">-->
	   
									<img id="dlimageoutput" src="" style="width: 100%;
    position: absolute;
    height: 100%;
    float: left;
    left: 0px;
	z-index: -1;
    top: 0;
    border: none;
    object-fit: contain;
    background: white;">
<!--

							
							<p style="font-size: 34px;
    margin-top: 106px;
    margin-left: 124px;" id="textdealimage">Add your image Here</p>
							<p style="    font-size: 34px;
    margin-left: 127px;">max-size 1200X1000</p>
-->
							
							<div class="icondeal">
								<img src="img/Icons/uploadiocn.png">
							</div>
						</div>
						
						<div class="dealdetail">
							
							<div class="deallogo">
							
								
								
<!--
								<img src="img/camera.png" style="width: 35%; margin-top: 7px;"><br><span class="logotext">Add your deal image here</span>
									
<input type="file"  name="image"  id="file1" accept="image/*" onchange="loadFile3(event)" class="hide_file">
	   
									<img id="output3" src="" style="width: 100%;
    position: absolute;
    height: 100%;
    float: left;
    left: 0px;
	z-index: -1;
    top: 0;
    border: none;
    object-fit: contain;
    background: white;">


-->
								
								<script>
								
									document.getElementById('dlgetmodal').addEventListener('click', function (){
//			
	
			var cropmodalclose = document.getElementById('deal-image-modal');
			
			cropmodalclose.style.display="block";
			
		});
//		
//		
		document.getElementById('close-dlimagemodal').addEventListener('click', function (){
			
			var cropmodalclose = document.getElementById('deal-image-modal');
			
			cropmodalclose.style.display="none";
			
		});							
								
								</script>
<style>

	.dellogo
	{
		width: 100%; 
		height: 100%;
		position: absolute;
		object-fit: cover;
		
/*		background: rgba(0,0,0,0.5);*/
	}
								</style>
								<div class="dellogo" id="mv-del-logo">
								<img src="" style="width: 100%; height: 100%; visibility: hidden; background: white; object-fit: contain;" id="deloutput">
									
								</div>
								<p align="center" style="color: black;
    text-align: center;
    font-size: 12px;
    margin-top: 9px;">Upload image  here</p>
								<img id="dellogo" src="compman.gif" style="z-index: 2;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0; object-fit: cover;visibility: hidden">
								
								
								
							</div>
							
							
							<div class="decomname">
								<input type="text" placeholder="company name here*" class="deconame" id="entcname3" value="">
							</div>
							
							<div class="deoffer">
								<input type="text" placeholder="Offer here*" class="decoffer" id="delofferc">
							</div>
							
							<div class="determs">
								
								<input type="text" id="trmsdelpreivew" style="width: 114%;
    background: none;
    border: none; padding-left: 13px;">
								
							</div>
							
							<div class="deoffdes">
								
								<textarea rows="3" placeholder="Offer description here" class="deoffdesinput" id="deldescriptnc"></textarea>
								
							</div>
							
							<div class="dedate">
								
								<input type="text" placeholder="Expiration Date" class="ddateinpt" id="deldate" onchange="handlerdel(event);">
								<p style="font-size: 11px; display: none; margin-top: -10px;" id="deldateshow">Deal will expire on  <span id="dateon1" style="margin-left: 4px; display: none;"></span></p>
								
							</div>
							
						</div>
						
					</div>
					
					
				</div>
				
				
				<div class="rightpos">
					
					<div class="drightform">
						
					
						<input type="text" placeholder="company Name Here*" class="drightinput" id="delcomname" value="">
						<input type="text" placeholder="Your offer here*" class="drightinput" id="deloffer" onkeyup="m1()">
						
						<textarea placeholder="Offer desciption Here*" class="drighttextarea" rows="4" id="deldescription" onkeyup="m2()"></textarea>
						
						<input type="text" class="drightinput" placeholder="Expiry date" id="delexpirydate" onchange="delhandler(event);" onkeyup="m3()">
						<input type="text" placeholder="Select category" class="drightinput" id="delcate">
						<input type="text" placeholder="Address " class="drightinput" id="deladdress">
						<input type="text" placeholder="Zipcode" class="drightinput" id="delzipcode" onkeyup="m4()">
						
						
						
						
						<textarea placeholder="Term & conditions here*" class="drighttextarea" rows="4" id="delcondtions"></textarea>
						
						<input type="text" placeholder="Add deal code here" class="drightinput" id="delqrcode" onkeyup="m5()">
						<input type="text" placeholder="deal image link" class="drightinput" id="delimagelink" onkeyup="m6()">
						<select id="delpriority" style="width: 88%;
    margin-top: 12px;
    border-radius: 25px;
    margin-left: 15px;">
					<option>Priority Values</option>
  <option value="0">0</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
					<option value="6">6</option>
					<option value="7">7</option>
					<option value="8">8</option>
					<option value="9">9</option>
</select>
					<select id="dltrfl" style="width: 88%;
    margin-top: 12px;
    border-radius: 25px;
    margin-left: 15px;">	
						<option>PROMOTED SELECT</option>
  <option value="true">TRUE</option>
  <option value="false">FALSE</option>
</select>
						<input type="text" placeholder="placeid" class="drightinput" id="delplaceid" style="visibility: hidden;">
						<input type="text" placeholder="imagelogodel" id="imagelogodel" style="visibility: hidden;">
						<input type="text" placeholder="imagedel" id="imagedel" style="visibility: hidden;">
						<input type="text" id="rimgeurlmpapi" style="visibility:hidden;">
						
					</div>
					<button type="button" class="dbt" id="removedel">Reset</button>
					<button type="button" class="dbt" onClick="delupdate()" id="update_dealbtn" style="display: none;">Update</button>
					<button type="button" class="dbt" onClick="addnewonedel()" id="addnewonedel" style="display: none;">Add New One</button>
					<button type="button" class="dbt" onClick="delsubmit()" id="confrm_dealbtn">Confirm</button>
					
					
				</div>
				
				
				<!--End Deal and coupns modal 500-->
				
			<!--Being coupns qr code -->
				
				
				<!--Bing deals qr code -->
				
				<div class="dealaddQRCODE" id="dealscodeQR" style="display: none;">
				
					
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					<br>
					
					<div class="addcupancode" id="dealcodeQR"><p style="text-align: center;
    font-size: 27px;
    padding: 24px;">Add coupons code here</p></div>
					<h2 align="center" style="color: white;">AND</h2>
					<div class="addlink"><p style="    font-size: 24px;
    padding: 8px;
    padding-left: 22px;">Pest Link Here</p></div>
					
					<button type="button" class="btn_proceed">CONFIRM</button>
			</div>
				
				<!--Ends deals qr code -->



				
				
				
				
			</div>
				<!--Main Container Deal End--
				</div><!--Main Container-->
		</div> 
	  </div>
	  
	<!--End Here The page-->
	  
	
	 
	  
<style>

	
	.btn_proceed
	{
		
		float:left!important;
		margin-right: 10px!important;
		margin-top: 200px!important;
		
	}
	
	
/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 40px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	z-index: 4;
}

/* Modal Content */
.modal-content {
   background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 90%;
    height: 697px;
    /* left: 3%; */
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
	
	
	#map {
           height: 91%;
    width: 97%!important;
    position: absolute;
      }
    
      #floating-panel {
               position: absolute;
    top: -14px;
    line-height: 19px;
    left: 21%;
    z-index: 5;
    width: 70%;
    /* background-color: #fff; */
    padding: 5px;
    /* border: 1px solid #999; */
    text-align: center;
    font-family: 'Roboto','sans-serif';
    line-height: 30px;
    padding-left: 10px;
      }
	
	.inputsearch
	{
		    width: 67%;
    height: 40px;
    margin-top: 39px;
    padding-left: 12px;
	
	}

	.btnsearch
	{
		    width: 100px;
    height: 41px;
    background: #0dbaff;
    color: white;
    border: none;
	}
	
	.content-list {
    width: 23%;
    height: 91%;
    /* top: 78px; */
    background: #fffefe;
    position: absolute;
    z-index: 3;
		overflow: scroll;
		display: none;
}
	
	 /* Hidden by default. */
    #panel {
      height: 100%;
      width: null;
      background-color: white;
      position: fixed;
      z-index: 1;
      overflow-x: hidden;
      transition: all .2s ease-out;
    }
    .open {
      width: 250px;
    }
    /* Styling for place details */
    .hero {
      width: 100%;
      height: auto;
      max-height: 166px;
      display: block;
    }
    .place,
    p {
      font-family: 'open sans', arial, sans-serif;
      padding-left: 18px;
      padding-right: 18px;
    }
    .details {
      color: darkslategrey;
    }
    a {
      text-decoration: none;
      color: cadetblue;
    }
	  
	  
	  #list
	  {
		  width: 20%; 
		  height: 80%; 
		  background: red;
		  position: absolute;
		  z-index: 3;
	  }
	  
	  .list1
	  {
		  width: 100%; 
		  height: 100px;
		  
		  
		  
	  }
	  
	  .name
	  {
		  font-size:10px;
	  }
	  
	  .ulist li
	  {
		  width: 100%;
		  height: 100%;
		  background: blue;
		  
	  }
	  
	#dynamic-list li
	  {
		            list-style: none;
    width: 100%;
    /* margin-left: -24px; */
    left: 0p;
    float: left;
    height: a;
    height: auto;
    /* border: 1px solid white; */
    /* background: #f5f7f5; */
    border-bottom: 1px solid #b9b3b3;
		  
	  }
	  
	

	
</style>
</head>
<body>


	
<!-- The Modal -->
<div id="myModal" class="modal">
<p style="font-size: 30px;
    color: white;
    margin-right: 17px;
    margin-top: -41px;" align="right" id="xclosemodal"><span class="glyphicon glyphicon-remove-circle"></span></p>
  <!-- Modal content -->
  <div class="modal-content">

	  <div id="floating-panel">
      <input id="address" type="textbox" placeholder="Search place by name or address..." class="inputsearch" value="">
      <input id="submit" type="button" value="Search" class="btnsearch">
		  <input  type="button" value="Select place" class="btnsearch" id="getlist">
    </div>
	  
	  <div class="content-list" id="content-list-list">
	  <ul id="dynamic-list"></ul>
	  </div>
	  
	  
	  <div id="panel"></div>
	   <div id="map"></div>
	  <p id="test">test</p>
	 
  </div>
</div>
	
	
	
	
<script>
	
$('#printoffer').on('keypress', function(e) {
    var that = $(this),
        textLength = that.val().length
    ;
    
    if(textLength > 28) {
        that.css('font-size', '28px');
	}
//    } else if(textLength > 20) {
//        that.css('font-size', '10px');
//    } else if(textLength > 60) {
//        that.css('font-size', '15px');
//    }
});
	
	
	
	
	
	
	document.getElementById('mv-del-logo').addEventListener('click',function (){
		
		
		var  mvmodalview = document.getElementById('deal-logo-modal');
		     mvmodalview.style.display="block";
		
	
	});
	
	
	document.getElementById('close-delogomodal').addEventListener('click',function (){
		
		var  clsemodal = document.getElementById('deal-logo-modal');
		     clsemodal.style.display="none";
		
	});
	
	
	
	
//	var addscreen = document.getElementById('address');
//console.log(inputBoxoffer);	
//
//addscreen.onkeyup = function(){
//		console.log('okokok');
//
//    document.getElementById('address').value = this.value;
//}
	
	
	
//	// Get the text field that we're going to track
//let field = document.getElementById("listsearch");
// 
//// See if we have an autosave value
//// (this will only happen if the page is accidentally refreshed)
//if (sessionStorage.getItem("autosave")) {
//  // Restore the contents of the text field
//  field.value = sessionStorage.getItem("autosave");
//}
// 
//// Listen for changes in the text field
//field.addEventListener("change", function() {
//  // And save the results into the session storage object
//  sessionStorage.setItem("autosave", field.value);
//});
	
	
	
	
	
	
//	This is calling search image api being here
	
	document.getElementById('imagesearch').addEventListener('click',getsearch);
		
	var selectedlink;

		function getsearch()
			{
				
			list = document.getElementById("dynamic-list1");
			
			for (var i=document.getElementById("dynamic-list1").getElementsByTagName("li").length-1; i>=0; i--)
				{
					
					var itemview = document.getElementById("dynamic-list1").getElementsByTagName("li")[i];
					list.removeChild(itemview);
					
								console.log(' remove'+i);

				}
				
			var searchkeyword =  document.getElementById('searhdata').value;
//				
    for (var i = 1; i < 100; i+=10)
    {
				
					
		const pos = i;
//				var values = httpGetAsync("https://www.googleapis.com/customsearch/v1?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&cx=010919822463553969394:ngczdhj2s08&q="+searchkeyword+"&searchType=image&num=10&start=1",function(response){
				
				var values = httpGetAsync("https://www.googleapis.com/customsearch/v1?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&cx=010919822463553969394:ngczdhj2s08&q="+searchkeyword+"&searchType=image&start="+pos+"&imgSize=large",function(response){
//					
					
					var obj = JSON.parse(response);
//					 console.log(obj);
//					console.log(obj);
								
//					console.log(response); 
					
								for (var i = 0; i < obj.items.length; i++) {
				
                                      const item = obj.items[i];
									
									const datalink = item.link;
									
//									console.log(datalink);
//      console.log(item);
									
									var ul = document.getElementById("dynamic-list1");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+item.link+' style="float:left; width: 16%; margin-top: 10px; margin-left: 3%;" id="photosearchlist">';
        ul.appendChild(li);
								
									
									li.addEventListener('click',searchwebimage);
									
									
									function searchwebimage()
									{
										
										console.log(datalink);
										
										selectedlink = datalink;
										
										document.getElementById('myImg').src = selectedlink;
										
										var myimagelogo = document.getElementById('myImg');
										    myimagelogo.style.visibility="visible";
										
										var selectlogotext = document.getElementById('selectlogotext');
										    selectlogotext.style.display="none";
										
										
										var closemodalimagesearch = document.getElementById('closewebsearch');
										    closemodalimagesearch.style.display="none";
										
										var closemodalimagesearch = document.getElementById('close-chosoptn');
										    closemodalimagesearch.style.display="none";
										
										
										
									
									};
										
								}
						
				
				});
		
	}
				
				
//				var values = httpGetAsync("https://www.googleapis.com/customsearch/v1?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&cx=010919822463553969394:ngczdhj2s08&q="+searchkeyword+"&searchType=image&num=5&start11=&imgSize=large",function(response){
////					
//					
//			
////					console.log(response); 
//					
//					var obj = JSON.parse(response);
//					 console.log(obj);
//					console.log(obj);
//								
//								for (var i = 0; i < obj.items.length; i++) {
//				
//                                      const item = obj.items[i];
//									
//									const datalink = item.link;
//									
//									console.log(datalink);
//      console.log(item);
//									
//									var ul = document.getElementById("dynamic-list1");
//		  var li=document.createElement('li');
//        li.innerHTML='<img src='+item.link+' style="float:left; width: 16%; margin-top: 10px; margin-left: 3%;" id="photosearchlist">';
//        ul.appendChild(li);
//								
//									
//									li.addEventListener('click',searchwebimage);
//									
//									
//									function searchwebimage()
//									{
//										
//										console.log(datalink);
//										
//										selectedlink = datalink;
//										
//										document.getElementById('myImg').src = selectedlink;
//										
//										var myimagelogo = document.getElementById('myImg');
//										    myimagelogo.style.visibility="visible";
//										
//										var selectlogotext = document.getElementById('selectlogotext');
//										    selectlogotext.style.display="none";
//										
//										
//										var closemodalimagesearch = document.getElementById('closewebsearch');
//										    closemodalimagesearch.style.display="none";
//										
//										var closemodalimagesearch = document.getElementById('close-chosoptn');
//										    closemodalimagesearch.style.display="none";
//										
//										
//										
//									
//									};
//										
//								}
//						
//				
//				});
//		
				
	}
//			}
	

	
	
//	this is end of search image logo uploding
			
	
	//	This is calling search image api being here
	
	document.getElementById('imagesearch2').addEventListener('click',imagecoupons);
	
		
	var selectedlink2;

		function imagecoupons()
			{
				
				
			list = document.getElementById("dynamic-list22");
			
			for (var i=document.getElementById("dynamic-list22").getElementsByTagName("li").length-1; i>=0; i--)
				{
					
					var itemview = document.getElementById("dynamic-list22").getElementsByTagName("li")[i];
					list.removeChild(itemview);
					
								console.log(' remove'+i);

				}

				for (var i = 1; i < 100; i+=10)
    {
				
					
		const pos = i;
				
			var searchkeyword =  document.getElementById('searhdata2').value;
							var values = httpGetAsync("https://www.googleapis.com/customsearch/v1?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&cx=010919822463553969394:ngczdhj2s08&q="+searchkeyword+"&searchType=image&start="+pos+"&imgSize=large",function(response){
					
					
					
//					console.log(response);
					
					var obj = JSON.parse(response);
					
					console.log(obj);
								
								for (var i = 0; i < obj.items.length; i++) {
				
                                      const item = obj.items[i];
									
									const datalink = item.link;
      
									
									var ul = document.getElementById("dynamic-list22");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+item.link+' style="float:left; width: 16%; margin-top: 10px; margin-left: 3%;" id="photosearchlist">';
        ul.appendChild(li);
								
									
									li.addEventListener('click',searchwebimage2);
									
									
									function searchwebimage2()
									{
										
										console.log(datalink);
										
										selectedlink2 = datalink;
										
										document.getElementById('output').src = selectedlink2;
										
										
										var closemodalimagesearch = document.getElementById('closewebsearch2');
										    closemodalimagesearch.style.display="none";
										
										var closemodalimagesearch = document.getElementById('close-image-coupons');
										    closemodalimagesearch.style.display="none";
										
										var carediticon = document.getElementById('cmraeditlogo');
										    carediticon.style.visibility="visible";
										
										var output_image_cpupons = document.getElementById('output');
										    output_image_cpupons.style.visibility="visible";
										
									
									};
										
								}
				});
	}
	}
			
	

	
	
//	this is end of search image logo uploding
			
	
	
	//	This is calling search image api being here
	
	document.getElementById('dl-logo-submit').addEventListener('click',logoDLwebsearch);
	
		
	var selectedlink3;

		function logoDLwebsearch()
			{
				
				
			list = document.getElementById("dynic-dllogolist");
			
			for (var i=document.getElementById("dynic-dllogolist").getElementsByTagName("li").length-1; i>=0; i--)
				{
					
					var itemview = document.getElementById("dynic-dllogolist").getElementsByTagName("li")[i];
					list.removeChild(itemview);
					
								console.log(' remove'+i);

				}
				
			var searchkeyword =  document.getElementById('dllogosearch').value;
				
					for (var i = 1; i < 100; i+=10)
    {			
		const pos = i;
				
				
				var values = httpGetAsync("https://www.googleapis.com/customsearch/v1?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&cx=010919822463553969394:ngczdhj2s08&q="+searchkeyword+"&searchType=image&num=10&start="+pos+"&imgSize=large",function(response){
					
					
					
//					console.log(response);
					
					var obj = JSON.parse(response);
					
					console.log(obj);
								
								for (var i = 0; i < obj.items.length; i++) {
				
                                      const item = obj.items[i];
									
									const datalink = item.link;
      
									
									var ul = document.getElementById("dynic-dllogolist");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+item.link+' style="float:left; width: 16%; margin-top: 10px; margin-left: 3%;" id="photosearchlist">';
        ul.appendChild(li);
								
									
									li.addEventListener('click',searchwebimage2);
									
									
									function searchwebimage2()
									{
										
										console.log(datalink);
										
										selectedlink3 = datalink;
										
										document.getElementById('dellogo').src = selectedlink3;
										
										
										var dellogoimage = document.getElementById('dellogo');
										    dellogoimage.style.position="absolute";
										
										var closemodalimagesearch = document.getElementById('logo-deal-web-modal');
										    closemodalimagesearch.style.display="none";
										
										var closemodalimagesearch = document.getElementById('deal-logo-modal');
										    closemodalimagesearch.style.display="none";
										
										
										var outputimagecpupons = document.getElementById('dellogo');
										    outputimagecpupons.style.visibility="visible";
										
										
										var mvdellogo = document.getElementById('mv-del-logo');
										    mvdellogo.style.zIndex="3";
										
									
									};
										
								}
				});
	}
			}
	

	
	
	
	
	//	This is calling search image api being here
	
	document.getElementById('dl-image-submit').addEventListener('click',imageDLwebsearch);
	
		
	var selectedlink4;

		function imageDLwebsearch()
			{
				
				
			list = document.getElementById("dynic-dlimagelist");
			
			for (var i=document.getElementById("dynic-dlimagelist").getElementsByTagName("li").length-1; i>=0; i--)
				{
					
					var itemview = document.getElementById("dynic-dlimagelist").getElementsByTagName("li")[i];
					list.removeChild(itemview);
					
								console.log(' remove'+i);

				}
				
			var searchkeyword =  document.getElementById('dlimagesearch').value;
				
					for (var i = 1; i < 100; i+=10)
    {
				
					
		        const pos = i;
				
				var values = httpGetAsync("https://www.googleapis.com/customsearch/v1?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&cx=010919822463553969394:ngczdhj2s08&q="+searchkeyword+"&searchType=image&num=10&start="+pos+"&imgSize=large",function(response){
					
					
					
//					console.log(response);
					
					var obj = JSON.parse(response);
					
					console.log(obj);
								
								for (var i = 0; i < obj.items.length; i++) {
				
                                      const item = obj.items[i];
									
									const datalink = item.link;
      
									
									var ul = document.getElementById("dynic-dlimagelist");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+item.link+' style="float:left; width: 16%; margin-top: 10px; margin-left: 3%;" id="photosearchlist">';
        ul.appendChild(li);
								
									
									li.addEventListener('click',searchwebimage2);
									
									
									function searchwebimage2()
									{
										
										console.log(datalink);
										
										selectedlink4 = datalink;
										
								 document.getElementById('dlimageoutput').src = selectedlink4;
										
										
										
										var closemodalimagesearch = document.getElementById('image-deal-web-modal');
										    closemodalimagesearch.style.display="none";
										
										var closemodalimagesearch = document.getElementById('deal-image-modal');
										    closemodalimagesearch.style.display="none";
										
//									
										var output_image_cpupons = document.getElementById('dlimageoutput');
										    output_image_cpupons.style.zIndex="2";
										
									
									};
										
								}
				});
	}
			}
	
	
	
	
	
	
	
	
		
		
			
			function httpGetAsync(theUrl, callback)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() { 
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
    }
    xmlHttp.open("GET", theUrl, true); // true for asynchronous 
    xmlHttp.send(null);
}
	

	
	
//	This is calling search image here end here 
	
	

document.getElementById("xclosemodal").addEventListener("click", function(){
  
	document.getElementById("listsearch").value='';
	
});
	
	
	
var inputBoxoffer = document.getElementById('printoffer');
console.log(inputBoxoffer);	

inputBoxoffer.onkeyup = function(){
		console.log('okokok');

    document.getElementById('offer').value = this.value;
}


var delcnamec = document.getElementById('delcomname');

delcnamec.onkeyup = function(){

    document.getElementById('entcname3').value = this.value;
}


var delzipcode = document.getElementById('delzipcode');

delzipcode.onkeyup = function(){
	
	 var x = document.getElementById("delzipcode");
  x.style.border="0px solid red";
	
	
}

var delexpirydate = document.getElementById('delexpirydate');

delexpirydate.onkeyup = function(){
	
	 var x = document.getElementById("delexpirydate");
  x.style.border="0px solid red";
	
	
}

var delqrcode = document.getElementById('delqrcode');

delqrcode.onkeyup = function(){
	
	 var x = document.getElementById("delqrcode");
  x.style.border="0px solid red";
	
	
}




var deloffer = document.getElementById('deloffer');

deloffer.onkeyup = function(){
	
	 var x = document.getElementById("deloffer");
  x.style.border="0px solid red";

    document.getElementById('delofferc').value = this.value;
	
	
}

var delofferc = document.getElementById('delofferc');

delofferc.onkeyup = function(){


    document.getElementById('deloffer').value = this.value;
	
	
}

var deldescriptnc = document.getElementById('deldescriptnc');

deldescriptnc.onkeyup = function(){


    document.getElementById('deldescription').value = this.value;
	
	
}




var deldescription = document.getElementById('deldescription');

deldescription.onkeyup = function(){
	
		 var x = document.getElementById("deldescription");
  x.style.border="0px solid red";
	
    document.getElementById('deldescriptnc').value = this.value;
}





var inputdes = document.getElementById('printdes');

inputdes.onkeyup = function(){
		
    document.getElementById('entdesc').value = this.value;
}

var qrcode = document.getElementById('qrcode');

qrcode.onkeyup = function(){
		
    var imagelink = document.getElementById('imagelink');
	    imagelink.style.border="2px solid white";
}

var imagelink = document.getElementById('imagelink');

imagelink.onkeyup = function(){
		
    var qrcode = document.getElementById('qrcode');
	    qrcode.style.border="2px solid white";
}

	
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCFgW7VCEKkko_t42HBjXBL0guNmJgl-94",
    authDomain: "mycommunity-a734d.firebaseapp.com",
    databaseURL: "https://mycommunity-a734d.firebaseio.com",
    projectId: "mycommunity-a734d",
    storageBucket: "mycommunity-a734d.appspot.com",
    messagingSenderId: "885464413077"
  };
  firebase.initializeApp(config);
	
	
	
//	being the uploading lest from left an side refrance
	
	
	//	End being the uploading lest from left an side refrance

	
	

	
	
var key;
var starCountRef;
var starCountRef2;
var key2;
var starCountRefselected;
var selectedplace_get;
var starCountRef1;
var objects_array;
var usuarios = new Array();
var ref = firebase.database().ref('coupons_new');

	

//	function searchtext()
//					{
//						
//						var searchtext = document.getElementById('searchtextfild').value;
//					
//						
//						list = document.getElementById("cupsearch");
//			
//			for (var i=document.getElementById("cupsearch").getElementsByTagName("li").length-1; i>=0; i--)
//				{
//					
//					var itemview = document.getElementById("cupsearch").getElementsByTagName("li")[i];
//					list.removeChild(itemview);
//					
//								console.log(' remove'+i);
//
//				}
//						
//						
//						
//						ref.once("value")
//        .then(function (snapshot) {
//
//            snapshot.forEach(function (childSnapshot) {
//				
//				key = childSnapshot.key;
//				key2 = Object.keys(childSnapshot.val());
//				
////				console.log(key);
////				console.log(key2);
//				
//				for(var j=0; j<key2.length; j++)
////						
//					{
//						
//						starCountRef = firebase.database().ref("/coupons_new/"+key+'/'+key2[j]);
//						
//						
//						starCountRef.on('value', function (snapshot2) {
//				
//					 objects_array = snapshot2.val();
//					
////					console.log(objects_array);
//					
//					for(var i=0; i<objects_array.length; i++)
//						
//					{
//					
//						
//						
//						
//							const name = objects_array[i].name;
//						const imageurl = objects_array[i].image[0].imageUrl;
//						const offer = objects_array[i].offer;
//						const description = objects_array[i].description;
//						const cateogry = objects_array[i].cateogry;
//						const ExpiryDate = objects_array[i].expiryDate;
//						const discalmer = objects_array[i].discalmer;
//						const address = objects_array[i].address;
//						const code = objects_array[i].code;
//						const zipcode = objects_array[i].zipcode;
//						const placeid = objects_array[i].placeid;
//						const imagelogo = objects_array[i].imagelogo;
//						const place = objects_array[i].place;
//						const pos = i;
//						
//
//						
//						var mySearchKey = searchtext.toUpperCase();
//						
//  if (mySearchKey.indexOf(name.toUpperCase())>-1) {
//	  
//	  
//	  console.log(name.toUpperCase());
//	  
//	  var ul = document.getElementById("cupsearch");
//		  var li=document.createElement('li');
//        li.innerHTML='<img src='+imageurl+' style="width: 90%; height: 109px; margin-top: 10px; margin-left: 3%; object-fit: cover;" id="photosearchlist">';
//        ul.appendChild(li);
//	  
//	  
//	  
//	  
//	 var listallcoupons =  document.getElementById('couponsimage');
//	  listallcoupons.style.display="none";
//	  
//	  function listgetcoupons()
//									
//						           {  
//									 
//									   console.log(pos);
//									   
//									   
//									   document.getElementById('entcname1').value = name;  
//									   document.getElementById('entcname').value = name;
//									   document.getElementById('printdes').value = description;
//									   document.getElementById('printoffer').value = offer;
//									   
//					
//									   
//										document.getElementById('offer').value = offer;
//										document.getElementById('entdesc').value = description;
//										document.getElementById('category').value = cateogry;
//										document.getElementById('expiraydate').value = ExpiryDate;
//										document.getElementById('tersconditons').value = discalmer;
//										document.getElementById('address1').value = address;
//										document.getElementById('zipcode').value = zipcode;
//										document.getElementById('qrcode').value = code;
//
//
//										document.getElementById('zipcode').value = zipcode;
//									    document.getElementById('editplaceid').value = placeid;
//									    document.getElementById('myImg').src = imagelogo;
//									    document.getElementById('output').src = imageurl;
//									   
//									    document.getElementById('imageurl11').value = imageurl;
//										document.getElementById('logourl11').value = imagelogo;
//									   
//									   
//									   selectedplace_get = place;
//									   
//									   starCountRef1 = firebase.database().ref("/coupons_new/"+zipcode+'/'+placeid+'/'+pos);
//									   
//									   
//								       var editshow = document.getElementById('bodysearch1');
//								       var editshow = document.getElementById('bodysearch1');
//										editshow.style.display="none";
//									   
//									   document.getElementById('dateon').innerHTML = ExpiryDate;
//									   
//									  var datepcoupons =  document.getElementById('datepicc');
//									   datepcoupons.style.display="block";
//									   
//									    var fielddate =  document.getElementById('expiraydate2');
//									   fielddate.style.display="none";
//									   
//									   
//									     var cmraeditlogo = document.getElementById('cmraeditlogo');
//										cmraeditlogo.style.visibility="visible";
//									   
//									   var oncoupons =  document.getElementById('dateon');
//									       oncoupons.style.display="block";
//									   
//									   
//									        var editshow = document.getElementById('output');
//										editshow.style.visibility="visible";
//									   
//									   var coupons_frame = document.getElementById('mainconainercup');
//										coupons_frame.style.display="block";
//									   
//									    var updatebtn = document.getElementById('updatebtn');
//										updatebtn.style.display="block";
//									   
//									    var addnewbtn = document.getElementById('addnewbtn');
//										addnewbtn.style.display="block";
//									   
//									   var confbtncou = document.getElementById('confim_copons');
//										confbtncou.style.display="none";
//									   
//									   
//									   var deal_frame = document.getElementById('maincondeal');
//										deal_frame.style.display="none";
////									   
//									   
//									   
//									   
//									   
//									 	
//									}
//							
//						li.addEventListener('click',listgetcoupons);
//	  
//	  
//	  
//   
//  }
//					
//						
//						
//	
//
//						
//					}
//							
//						});
//						
//
//						
//						
//					}
//			
//				
//				
//				
//				
//				
//				
//			});
//						});
//						
//						
//					}	
//	
	
	
	
	
ref.once("value")
        .then(function (snapshot) {

            snapshot.forEach(function (childSnapshot) {
				
//				console.log(JSON.stringify(childSnapshot.val()));shahrukh
               
				key = childSnapshot.key;
				key2 = Object.keys(childSnapshot.val());
				
				
				
//				
//				console.log(key);
//				console.log(key2);
				
				for(var j=0; j<key2.length; j++)
//						
					{
				
						starCountRef = firebase.database().ref("/coupons_new/"+key+'/'+key2[j]);
					
						
						
						
				starCountRef.on('value', function (snapshot2) {
				
					 objects_array = snapshot2.val();
					
					console.log(objects_array);
					
					for(var i=0; i<objects_array.length; i++)
						
					{

						
						
						const imageurl = objects_array[i].image[0].imageUrl;
						const name = objects_array[i].name;
						const offer = objects_array[i].offer;
						const description = objects_array[i].description;
						const cateogry = objects_array[i].cateogry;
						const ExpiryDate = objects_array[i].expiryDate;
						const discalmer = objects_array[i].discalmer;
						const address = objects_array[i].address;
						const code = objects_array[i].code;
						const zipcode = objects_array[i].zipcode;
						const placeid = objects_array[i].placeid;
						const imagelogo = objects_array[i].imagelogo;
						const place = objects_array[i].place;
						const  pos = i;
						const  priority = objects_array[i].priority;
						const  isPromoted = objects_array[i].isPromoted;
						
						
						
						
						var ul = document.getElementById("couponsimage");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+imageurl+' style="width: 90%; height: 109px; margin-top: 10px; margin-left: 3%; object-fit: cover;" id="photosearchlist">'+'<p style="float: left; margin-top: -58px; font-size: 19px; width: 73%; height: auto; z-index: -1;" id="namesearchlist">'+name+'</p>';
        ul.appendChild(li);
						
						
					
						
							
						function listgetcoupons()
									
						           {  
									 
									   console.log(pos);
									   
									   
									   document.getElementById('entcname1').value = name;  
									   document.getElementById('entcname').value = name;
									   document.getElementById('printdes').value = description;
									   document.getElementById('printoffer').value = offer;
									   
					
									   
										document.getElementById('offer').value = offer;
										document.getElementById('entdesc').value = description;
										document.getElementById('category').value = cateogry;
										document.getElementById('expiraydate').value = ExpiryDate;
										document.getElementById('tersconditons').value = discalmer;
										document.getElementById('address1').value = address;
										document.getElementById('zipcode').value = zipcode;
										document.getElementById('qrcode').value = code;
										document.getElementById('zipcode').value = zipcode;
									    document.getElementById('editplaceid').value = placeid;
									    document.getElementById('myImg').src = imagelogo;
									    document.getElementById('output').src = imageurl;
									   
									    document.getElementById('imageurl11').value = imageurl;
										document.getElementById('logourl11').value = imagelogo;
									   
									           var setvalue =  document.getElementById('priority').value = priority;
									             var setvalue1 =  document.getElementById('trfl').value = isPromoted;
								  
                                               var selObj = document.getElementById("priority");
                                               var setvalue = selObj.options[selObj.selectedIndex].value;
                                                document.getElementById("priority").value = setvalue;
									   
									    var selObj1 = document.getElementById("trfl");
                                               var setvalue1 = selObj1.options[selObj1.selectedIndex].value;
                                                document.getElementById("trfl").value = setvalue1;
									   
									   
									   
									   
									   
									   selectedplace_get = place;
									   
									   starCountRef1 = firebase.database().ref("/coupons_new/"+zipcode+'/'+placeid+'/'+pos);
									   
									   
								       var editshow = document.getElementById('bodysearch1');
								       var editshow = document.getElementById('bodysearch1');
										editshow.style.display="none";
									   
									   document.getElementById('dateon').innerHTML = ExpiryDate;
									   
									  var datepcoupons =  document.getElementById('datepicc');
									   datepcoupons.style.display="block";
									   
									    var fielddate =  document.getElementById('expiraydate2');
									   fielddate.style.display="none";
									   
									   
									     var cmraeditlogo = document.getElementById('cmraeditlogo');
										cmraeditlogo.style.visibility="visible";
									   
									   var oncoupons =  document.getElementById('dateon');
									       oncoupons.style.display="block";
									   
									   
									        var editshow = document.getElementById('output');
										editshow.style.visibility="visible";
									   
									   var coupons_frame = document.getElementById('mainconainercup');
										coupons_frame.style.display="block";
									   
									    var updatebtn = document.getElementById('updatebtn');
										updatebtn.style.display="block";
									   
									    var addnewbtn = document.getElementById('addnewbtn');
										addnewbtn.style.display="block";
									   
									   var confbtncou = document.getElementById('confim_copons');
										confbtncou.style.display="none";
									   
									   
									   var deal_frame = document.getElementById('maincondeal');
										deal_frame.style.display="none";
//									   
									   
									   var myImg2 = document.getElementById('myImg');
										myImg2.style.visibility="visible";
									   
									    var selectlogotext = document.getElementById('selectlogotext');
										selectlogotext.style.display="none";
									   
									   
									   
									   
									 	
									}
							
						li.addEventListener('click',listgetcoupons);
						
						
							
					
					}
					
					
					
					
					
					});
					
					}
				
				
				
                
					
					
					
//					
				
				
				
            });
        });
	
	
	function myFunction() {
    var input, filter, ul, li, a, i, txtValue;
    input = document.getElementById("searchtextfild");
    filter = input.value.toUpperCase();
    ul = document.getElementById("couponsimage");
    li = ul.getElementsByTagName("li");
    for (i = 0; i < li.length; i++) {
        a = li[i];
        txtValue = a.textContent || a.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
        } else {
            li[i].style.display = "none";
        }
    }
}
	
	
	
//	being This is for refrance from deals 9999
	
	
	
	var keydeal;
var starCountRefdeal;
var starCountRef2deal;
var selectedplace_get;
var logoimage;
var starCountRef1;

var objects_arraydeal;
var usuariosdeal = new Array();
var refdeal = firebase.database().ref('deals_new');
	
//var selectedlink;
//var selectedlink2;
	
refdeal.once("value")
        .then(function (snapshot) {

            snapshot.forEach(function (childSnapshot) {
				
//				console.log(JSON.stringify(childSnapshot.val()));
               
				keydeal = childSnapshot.key;
				key2deal = Object.keys(childSnapshot.val())
				
				
//				console.log(keydeal);
//				console.log(key2deal);
//				console.log(JSON.stringify(childSnapshot.val()));
				for(var dj=0; dj<key2deal.length; dj++)
//						
					{
						
//						console.log(key2deal[dj]);
						
						
					
				
                starCountRefdeal = firebase.database().ref("/deals_new/"+keydeal+'/'+key2deal[dj]);
						
						
				
				starCountRefdeal.on('value', function (snapshot2) {
				
					 objects_arraydeal = snapshot2.val();
					
//					console.log(objects_array);
					
					
//					console.log(objects_array); 8888
					
					for(var i=0; i<objects_arraydeal.length; i++)
						
					{	
						 const imageurl = objects_arraydeal[i].image[0].imageUrl;
//						console.log(objects_array[i]);
//						
						const name = objects_arraydeal[i].name;
						
						const offer = objects_arraydeal[i].offer;
						const description = objects_arraydeal[i].description;
						const cateogry = objects_arraydeal[i].cateogry;
						const ExpiryDate = objects_arraydeal[i].expiryDate;
						const discalmer = objects_arraydeal[i].discalmer;
						const address = objects_arraydeal[i].address;
						const code = objects_arraydeal[i].code;
						const zipcode = objects_arraydeal[i].zipcode;
						const placeid = objects_arraydeal[i].placeid;
						const logoimage = objects_arraydeal[i].imagelogo;
						const imagelink = objects_arraydeal[i].imagelink;
						const place = objects_arraydeal[i].place;
						const pos = i;
						
						
						var ul = document.getElementById("couponsimagedeal");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+imageurl+' style="width: 90%; height: 109px; margin-top: 10px; margin-left: 3%; object-fit:cover;" id="photosearchlist">'+'<p style="float: left; margin-top: 10px; font-size: 19px; width: 73%; height: auto; z-index: -1; position: absolute;" id="namesearchlist">'+name+'</p>';
        ul.appendChild(li);
							
						
						li.addEventListener('click',listgetsdeal);
						
							function listgetsdeal()
									
						           {
								
									   
									    var editshow = document.getElementById('bodysearch1');
										editshow.style.display="none";
									   
									
									   
									    document.getElementById('delcomname').value = name;
									    document.getElementById('entcname3').value = name;
							
									   
										document.getElementById('deloffer').value = offer;
									    document.getElementById('delofferc').value = offer;
									   
									   
									   
									   document.getElementById('delplaceid').value = placeid;
									   
									   
										document.getElementById('deldescription').value = description;
									   document.getElementById('deldescriptnc').value = description;
										document.getElementById('delcate').value = cateogry;
										document.getElementById('delexpirydate').value = ExpiryDate;
										document.getElementById('delcondtions').value = discalmer;
									   document.getElementById('trmsdelpreivew').value = discalmer;
										document.getElementById('deladdress').value = address;
										document.getElementById('delzipcode').value = zipcode;
										document.getElementById('delqrcode').value = code;
									   document.getElementById('imagedel').value = imageurl;
									   document.getElementById('delimagelink').value = imagelink;
										document.getElementById('imagelogodel').value = logoimage;
									    document.getElementById('deloutput').src = logoimage;
									    document.getElementById('dlimageoutput').src = imageurl;
									   
									   selectedplace_get = place;
									   
									    starCountRef1 = firebase.database().ref("/deals_new/"+zipcode+'/'+placeid+'/'+pos);
									   
									   
									   
									   
									    var deldateshow=  document.getElementById('deldateshow');
									     deldateshow.style.display="block";
									   
									   document.getElementById('dateon1').innerHTML = ExpiryDate;
									 var datedel=  document.getElementById('dateon1');
									     datedel.style.display="block";
									   
									   var maincoupons_frame = document.getElementById('mainconainercup');
										maincoupons_frame.style.display="none";
									  
									   
									   
									   var deal_frame = document.getElementById('maincondeal');
										deal_frame.style.display="block";
									   
									   var deldate = document.getElementById('deldate');
										deldate.style.display="none";
									  
									   
									    
									   
									   
									        var dealimage = document.getElementById('dlimageoutput');
										dealimage.style.zIndex="0";
									   
									   var deal_frame = document.getElementById('confrm_dealbtn');
										deal_frame.style.display="none";
									   
									    var deloutput = document.getElementById('deloutput');
										deloutput.style.visibility="visible";
									   
									   var deal_frame = document.getElementById('update_dealbtn');
										deal_frame.style.display="block";
									   
									   var addnewonedel = document.getElementById('addnewonedel');
										addnewonedel.style.display="block";
									   
									    var removedel = document.getElementById('removedel');
										removedel.style.display="none";
									   
									   var confbtncou = document.getElementById('confim_copons');
										confbtncou.style.display="none";
									   
									 
									   
									   
									 	
									}
					
					
				}
					
					
				});
						
					}
				
				
            });
        });
	
	
	
	function myFunction2() {
    var input, filter, ul, li, a, i, txtValue;
    input = document.getElementById("searchdeals");
    filter = input.value.toUpperCase();
    ul = document.getElementById("couponsimagedeal");
    li = ul.getElementsByTagName("li");
    for (i = 0; i < li.length; i++) {
        a = li[i];
        txtValue = a.textContent || a.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
        } else {
            li[i].style.display = "none";
        }
    }
}
	
	
//  ends this is for refrance from deals 9999
	
	
	
	function addnewonedel()
	{
	
	var uniqueId = Math.random().toString(36).substring(2) 
               + (new Date()).getTime().toString(36);
		
		
		                            var name  =   document.getElementById('delcomname').value;
									var deloffer=	document.getElementById('deloffer').value;
									var description	= document.getElementById('deldescription').value;
									var category =  document.getElementById('delcate').value ;
									var exprydate =	document.getElementById('delexpirydate').value;
									var tersconditons =	document.getElementById('delcondtions').value;
									var address =	document.getElementById('deladdress').value;
									var zipcode =	document.getElementById('delzipcode').value;
		                            var placeid = document.getElementById('delplaceid').value;
									var qrcode	= document.getElementById('delqrcode').value;
									var imagelink=  document.getElementById('delimagelink').value;
		                            var logourl11 =  document.getElementById('imagelogodel').value;
									var imageurl11  = document.getElementById('imagedel').value;
		var delpriority  = document.getElementById('delpriority').value;
		var dltrfl  = document.getElementById('dltrfl').value;
		
//		                            var file = document.getElementById('dlimage').files[0];
var file = blob3;
//		                            var logofile = document.getElementById('dealogo').files[0];
		var logofile = blob4;
		
		
		if(selectedlink3==null)
			{
				
				
				if(logofile==null)
					{	
						
						if(file==null)
							{
								
								if(selectedlink4==null)
									{
										
//									alert('url logo url image'); neha
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										var imageobject = [];
		  imageobject.push({
			  imageUrl:imageurl11
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			offer:deloffer,
			imagelink:imagelink,
			offer:offer,
			priority:dlpriority,
			isPromoted:dltrfl,
			zipcode:zipcode,
			imagelogo:logourl11,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
										
										
									}
								else
									{
//										alert('right image from web and set url logo');
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										
										var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			priority:dlpriority,
			isPromoted:dltrfl,
			imagelink:imagelink,
			offer:deloffer,
			zipcode:zipcode,
			imagelogo:logourl11,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
										
										
										
										
									}
									
							}
						
						else
							{
//								alert('right image from computer and set url logo');
								
								
								 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						
						 var thisRef;
		
			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
//    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
//	  	  console.log(url);  
		  
		  		
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			offer:deloffer,
			imagelink:imagelink,
			offer:offer,
			priority:dlpriority,
			isPromoted:dltrfl,
			zipcode:zipcode,
			imagelogo:logourl11,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
		  
		  
	  });

								
							}
						
					}
				else if (file==null)
						{
						 
							if(selectedlink4==null)
								{
									
//									alert('compute logo and set url');
									
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								
							 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
//		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					 
					 
				
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:imageurl11
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:deloffer,
			priority:dlpriority,
			isPromoted:dltrfl,
			zipcode:zipcode,
			imagelogo:url1,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });	
//		console.log(objToSubmit);
									
									
									
								}
							else
								{
									
//									alert('computer logo and selected2 web');
									
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
									
									 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
//		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					 
					 
				
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
									
					 
					 var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:deloffer,
			zipcode:zipcode,
		    priority:dlpriority,
			isPromoted:dltrfl,
			imagelogo:url1,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });
									
									
								}
							
						 }
			
				else
				{
					
//					alert('succeed from computer and computer');
					
					 var thisRef;
					
					 loader = document.getElementById("loader");
			loader.style.display = "block";	
		
			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded del submited shahrukh!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);  
					
					
					 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					 
					 
				
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:deloffer,
			priority:dlpriority,
			isPromoted:dltrfl,
			zipcode:zipcode,
			imagelogo:url1,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });
		  
		   });	
							 });
//		console.log(objToSubmit);
					
					
					
				}
				
				
			}
		
		else if(selectedlink4==null)
			{
				
				if(file==null)
					{
						
//						alert('logo web and set url');
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						 var imageobject = [];
		  imageobject.push({
			  imageUrl:imageurl11
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:deloffer,
			priority:dlpriority,
			isPromoted:dltrfl,
			zipcode:zipcode,
			imagelogo:selectedlink3,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
						
						
						
						
					}
				else
					{
						
						
//						alert('web logo and computer');
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	

						
						
						 var thisRef;
		
			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);  
		  
		  		
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:deloffer,
			zipcode:zipcode,
			priority:dlpriority,
			isPromoted:dltrfl,
			imagelogo:selectedlink3,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
		  
		  
		  
		  
		  
		  
		  
	  });
						
						
					}
				
				
				
			}
		else
			{
				
//				
//				alert('succeed web and web');
				 loader = document.getElementById("loader");
			loader.style.display = "block";	
				
				 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
		offer:deloffer,
			zipcode:zipcode,
			priority:dlpriority,
			isPromoted:dltrfl,
			imagelogo:selectedlink3,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/deals_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
						
				
				
			}
		
		
	}
	
	
	function delupdate()	
		{
//			alert('good to know');
			
			
				var uniqueId = Math.random().toString(36).substring(2) 
               + (new Date()).getTime().toString(36);
		
			
//		                            var name  =   document.getElementById('delcomname').value;
									var offer=	document.getElementById('deloffer').value;
									var description	= document.getElementById('deldescription').value;
									var category =  document.getElementById('delcate').value ;
									var exprydate =	document.getElementById('delexpirydate').value;
									var tersconditons =	document.getElementById('delcondtions').value;
//									var address =	document.getElementById('deladdress').value;
									var zipcode =	document.getElementById('delzipcode').value;
//		                            var placeid = document.getElementById('delplaceid').value;
									var qrcode	= document.getElementById('delqrcode').value;
			var delpriority	= document.getElementById('delpriority').value;
			var dltrfl	= document.getElementById('dltrfl').value;
//									var imagelink=  document.getElementById('delimagelink').value;
//		                            var logourl11 =  document.getElementById('imagelogodel').value;
//									var imageurl11  = document.getElementById('imagedel').value;
		                            var file = document.getElementById('dlimage').files[0];
		                            var logofile = document.getElementById('dealogo').files[0];
			
			
					
		if(selectedlink3==null)
			{
				
				
				if(logofile==null)
					{	
						
						if(file==null)
							{
								
								if(selectedlink4==null)
									{
										
//									alert('url logo url image');
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,delpriority,dltrfl) {
		 
			
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	  priority:dlpriority,
isPromoted:dltrfl,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
										
									}
								else
									{
										alert('right image from web and set url logo');
										
										writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink4,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink4,delpriority,dltrfl) {
		 
			
			  var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	priority:dlpriority,
isPromoted:dltrfl,
	discalmer:tersconditons,
	image:imageobject,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
										
										
									}
									
							}
						
						else
							{
//								alert('right image from computer and set url logo');
								
								 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
					 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {

	  	  console.log(url); 
					
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url,delpriority,dltrfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	  priority:dlpriority,
isPromoted:dltrfl,
	discalmer:tersconditons,
	image:imageobject,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
					 
				
				
								
								
								
								
							}
						
					}
				else if (file==null)
						{
						 
							if(selectedlink4==null)
								{
									
//									alert('compute logo and set url');
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
									
									 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,delpriority,dltrfl) {
		 
			 
	
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
//	image:imageobject,
	  priority:dlpriority,
isPromoted:dltrfl,
	code:qrcode,
	imagelogo:url1,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
									
									
									
								}
							else
								{
									
//									alert('computer logo and selected2 web');
									
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
									
									 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,selectedlink4,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,selectedlink4,delpriority,dltrfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	image:imageobject,
	 priority:dlpriority,
isPromoted:dltrfl,
	code:qrcode,
	imagelogo:url1,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
					 
									
									
								}
							
						 }
			
				else
				{
					
//					alert('succeed from computer and computer');
					
					 loader = document.getElementById("loader");
			loader.style.display = "block";	
					
					 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url); 
					
					 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo.name);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,url,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,url,delpriority,dltrfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	priority:dlpriority,
isPromoted:dltrfl,
	image:imageobject,
	code:qrcode,
	imagelogo:url1,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
					 
				 });
						});
				
					
					
				}//				This is for computer to computer load on firebase
				
				
			}
		
		else if(selectedlink4==null)
			{
				
				if(file==null)
					{
						
//						alert('logo web and set url');
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						 writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink3,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink3,delpriority,dltrfl) {
		 
		
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	priority:dlpriority,
isPromoted:dltrfl,
	imagelogo:selectedlink3,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
		  
						
						
					}
				else
					{
						
						
//						alert('web logo and computer');
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
					 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url); 
					
	
		  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink3,url,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink3,url,delpriority,dltrfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	  priority:dlpriority,
isPromoted:dltrfl,
	imagelogo:selectedlink3,
	image:imageobject,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
		  
		  
		  
		  
		  
	  });
  });
						
					
						
					}
				
				
				
			}
		else
			{
				
//				alert('succeed web and web');
				
				 loader = document.getElementById("loader");
			loader.style.display = "block";	
				
				writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink3,selectedlink4,delpriority,dltrfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink3,selectedlink4,delpriority,dltrfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	image:imageobject,
	 priority:dlpriority,
isPromoted:dltrfl,
	imagelogo:selectedlink3,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
				
			}
			
			
		}//		End here the update deal
	
	
	function  updatesubmit()
	{
		
		var uniqueId = Math.random().toString(36).substring(2) 
               + (new Date()).getTime().toString(36);
		
//	    var name = document.getElementById('entcname1').value; 666
		
		var offer = document.getElementById('offer').value;
		var description = document.getElementById('entdesc').value;
		var address = document.getElementById('address1').value;
		var exprydate = document.getElementById('expiraydate').value;
		var tersconditons = document.getElementById('tersconditons').value;
		var zipcode = document.getElementById('zipcode').value;
		var qrcode = document.getElementById('qrcode').value;
		var  priority = document.getElementById('priority').value;
		var trfl = document.getElementById('trfl').value;
//		var file = document.getElementById('files').files[0];
//		var logofile = document.getElementById('filelogo').files[0];
		var file = blob2;
		var logofile = blob;
		
		
		if(selectedlink==null)
			{
				
				
				if(logofile==null)
					{	
						

						if(file==null)
							{
								
								if(selectedlink2==null)
									{
										
//									alert('url logo url image');
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,priority,trfl) {
		 
			
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	priority:priority,
	isPromoted:trfl,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
										
									}
								else
									{
//										alert('right image from web and set url logo');
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink2,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink2,priority,trfl) {
		 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
			 
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	code:qrcode,
	  priority:priority,
	isPromoted:trfl,
	image:imageobject,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
										
									}
									
							}
						
						else
							{
//								alert('right image from computer and set url logo');
								
								 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url); 
					
					 
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,ur,priorityl,trfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	  priority:priority,
	isPromoted:trfl,
	image:imageobject,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
				
								
								
							}
						
					}
				else if (file==null)
						{
						 
							if(selectedlink2==null)
								{
									
//									alert('compute logo and set url');
									
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
									
									 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo.name);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,priority,trfl) {
		 
			
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	code:qrcode,
	  priority:priority,
	isPromoted:trfl,
	imagelogo:url1,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
					 
									
									
									
								}
							else
								{
									
//									alert('computer logo and selected2 web');
									
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
									
									 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo.name);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,selectedlink2,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,selectedlink2,priority,trfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	image:imageobject,
	  priority:priority,
	isPromoted:trfl,
	code:qrcode,
	imagelogo:url1,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
					 
									
									
								}
							
						 }
			
				else
				{
					
					alert('ss');
					
					 loader = document.getElementById("loader");
			loader.style.display = "block";	
				
					 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url); 
					
					 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					
					 
					  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,url,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,url1,url,priority,trfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
			 
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	image:imageobject,
	    priority:priority,
	isPromoted:trfl,
	code:qrcode,
	imagelogo:url1,
	zipcode:zipcode 
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
					  
					 
					 
				 });
						});
					 
				 });
						});
				
					
					
				}//				This is for computer to computer load on firebase
				
				
			}
		
		else if(selectedlink2==null)
			{
				
				if(file==null)
					{
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
					
						 writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink,priority,trfl) {
		 
			 
			
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	imagelogo:selectedlink,
	      priority:priority,
	isPromoted:trfl,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
						
						
					}
				else
					{
						
						
//						alert('web logo and computer');
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
					 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url); 
					
	
		  writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink,url,priority,trfl); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink,url,priority,trfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	imagelogo:selectedlink,
	image:imageobject,
	    priority:priority,
	isPromoted:trfl,
	code:qrcode,
	zipcode:zipcode 
	  
	  
	  
  });
			 
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
		  
		  
		  
		  
		  
	  });
  });
						
					
						
					}
				
				
				
			}
		else
			{
				
//				alert('succeed web and web');
				
				 loader = document.getElementById("loader");
			loader.style.display = "block";	
				
				writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink,selectedlink2,priority); 
		
		 function writeUserData(offer,exprydate,description,tersconditons,zipcode,qrcode,selectedlink,selectedlink2,trfl) {
		 
			 
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
			 
  starCountRef1.update({
	  
    offer: offer,
	expiryDate:exprydate,
	description:description,
	discalmer:tersconditons,
	imagelogo:selectedlink,
	image:imageobject,
	priority:priority,
	isPromoted:trfl,
	code:qrcode,
	zipcode:zipcode 
	  
	  
  });
			  loader = document.getElementById("loader");
			loader.style.display = "none";	
			 
			 alert('Update it Successfully!');
		window.location.href = "creatingcoupons.html"; 
										   
		 }	
				
			}		
			
	}
	
	
		function dataURLtoBlob4(dataURL) {
  var BASE64_MARKER = ';base64,';
  if (dataURL.indexOf(BASE64_MARKER) == -1) {
    var parts = dataURL.split(',');
    var contentType = parts[0].split(':')[1];
    var raw = decodeURIComponent(parts[1]);

    return new Blob([raw], {
      type: contentType
    });
  }
	
  var parts = dataURL.split(BASE64_MARKER);
  var contentType = parts[0].split(':')[1];
  var raw = window.atob(parts[1]);
  var rawLength = raw.length;
  var uInt8Array = new Uint8Array(rawLength);
  for (var i = 0; i < rawLength; ++i) {
    uInt8Array[i] = raw.charCodeAt(i);
  }

  return new Blob([uInt8Array], {
    type: contentType
  });
}
	
	
	
	var formData4;
	var blob4;
	
	
		document.getElementById('submitcropp4').addEventListener('click',function(){
		
//		 document.getElementById('selectapiimage').value='';
			
			
	 image4 = new Image();
			
    image4.src = canvas4.toDataURL('image/png');
	
			formData4 = image4.src;
			
			console.log(image4.src);
		console.log(image4);
			
			
		 blob4 = dataURLtoBlob4(formData4);
			
		console.log(blob4);
		
			
			var cropmodal4 = document.getElementById('cropmodal4');
			    cropmodal4.style.display="none";
			
			var deloutput = document.getElementById('deloutput');
		        deloutput.src = formData4;
			deloutput.style.zIndex="1";
			deloutput.style.visibility="visible";
			
			var dealimagemodal = document.getElementById('deal-image-modal');
		        dealimagemodal.style.display="none";
			
	});
	
	
	
		function dataURLtoBlob3(dataURL) {
  var BASE64_MARKER = ';base64,';
  if (dataURL.indexOf(BASE64_MARKER) == -1) {
    var parts = dataURL.split(',');
    var contentType = parts[0].split(':')[1];
    var raw = decodeURIComponent(parts[1]);

    return new Blob([raw], {
      type: contentType
    });
  }
	
  var parts = dataURL.split(BASE64_MARKER);
  var contentType = parts[0].split(':')[1];
  var raw = window.atob(parts[1]);
  var rawLength = raw.length;
  var uInt8Array = new Uint8Array(rawLength);
  for (var i = 0; i < rawLength; ++i) {
    uInt8Array[i] = raw.charCodeAt(i);
  }

  return new Blob([uInt8Array], {
    type: contentType
  });
}
	
	
	
	var formData3;
	var blob3;
	
	
		document.getElementById('submitcropp3').addEventListener('click',function(){
		
//		 document.getElementById('selectapiimage').value='';
			
			
	 image3 = new Image();
			
    image3.src = canvas3.toDataURL('image/png');
	
			formData3 = image3.src;
			
			console.log(image3.src);
		console.log(image3);
			
			
		 blob3 = dataURLtoBlob3(formData3);
			
		console.log(blob3);
		
			
			var cropmodal3 = document.getElementById('cropmodal3');
			    cropmodal3.style.display="none";
			
			var dlimageoutput = document.getElementById('dlimageoutput');
		        dlimageoutput.src = formData3;
			dlimageoutput.style.zIndex="2";
			
			var dealimagemodal = document.getElementById('deal-image-modal');
		        dealimagemodal.style.display="none";
			
			
			var myImg1 = document.getElementById('myImg');
		        myImg1.style.visibility ="visible";
			
			var selectlogotext = document.getElementById('selectlogotext');
		        selectlogotext.style.display ="none";
			
	});
	
	
	
	
	
	function dataURLtoBlob2(dataURL) {
  var BASE64_MARKER = ';base64,';
  if (dataURL.indexOf(BASE64_MARKER) == -1) {
    var parts = dataURL.split(',');
    var contentType = parts[0].split(':')[1];
    var raw = decodeURIComponent(parts[1]);

    return new Blob([raw], {
      type: contentType
    });
  }
	
  var parts = dataURL.split(BASE64_MARKER);
  var contentType = parts[0].split(':')[1];
  var raw = window.atob(parts[1]);
  var rawLength = raw.length;
  var uInt8Array = new Uint8Array(rawLength);
  for (var i = 0; i < rawLength; ++i) {
    uInt8Array[i] = raw.charCodeAt(i);
  }

  return new Blob([uInt8Array], {
    type: contentType
  });
}
	
	
	
	var formData2;
	var blob2;
	
	
		document.getElementById('submitcropp2').addEventListener('click',function(){
		
		 document.getElementById('selectapiimage').value='';
			
			
	 image2 = new Image();
			
    image2.src = canvas2.toDataURL('image/png');
	
			formData2 = image2.src;
			
			console.log(image2.src);
		console.log(image2);
			
			
		 blob2 = dataURLtoBlob2(formData2);
			
		console.log(blob2);
		
			
			var cropmodal = document.getElementById('cropmodal2');
			    cropmodal.style.display="none";
			
			var output = document.getElementById('output');
		        output.src = formData2;
			
			var myImg1 = document.getElementById('myImg');
		        myImg1.style.visibility ="visible";
			
			var selectlogotext = document.getElementById('selectlogotext');
		        selectlogotext.style.display ="none";
			
	});
	
	
	
	
	
	function dataURLtoBlob(dataURL) {
  var BASE64_MARKER = ';base64,';
  if (dataURL.indexOf(BASE64_MARKER) == -1) {
    var parts = dataURL.split(',');
    var contentType = parts[0].split(':')[1];
    var raw = decodeURIComponent(parts[1]);

    return new Blob([raw], {
      type: contentType
    });
  }
	
  var parts = dataURL.split(BASE64_MARKER);
  var contentType = parts[0].split(':')[1];
  var raw = window.atob(parts[1]);
  var rawLength = raw.length;
  var uInt8Array = new Uint8Array(rawLength);
  for (var i = 0; i < rawLength; ++i) {
    uInt8Array[i] = raw.charCodeAt(i);
  }

  return new Blob([uInt8Array], {
    type: contentType
  });
}
	
	var formData;
	var blob;
	var image;
	
		document.getElementById('submitcropp').addEventListener('click',function(){
		
	image = new Image();
    image.src = canvas.toDataURL('image/png');
		
			formData= image.src;
			
			console.log(image.src);
		console.log(image);
			
		 blob = dataURLtoBlob(formData);
			
		console.log(blob);
			
			var cropmodal = document.getElementById('cropmodal');
			    cropmodal.style.display="none";
			
			var myImg = document.getElementById('myImg');
		        myImg.src = formData;
			
			
			var chosoptn = document.getElementById('close-chosoptn');
		        chosoptn.style.display="none";
			
			var myImg1 = document.getElementById('myImg');
		        myImg1.style.visibility ="visible";
			
			var selectlogotext = document.getElementById('selectlogotext');
		        selectlogotext.style.display ="none";
	});
	
	
	
	var imagemultiple;
	var imageobject1;
	
	 $('#files').on('change', function() {
	
//	$(function() {
		 
//		console.log('good one');
    // Multiple images preview in browser bhola
//    var imagesPreview = function() {

        if (files.files) {
            
			  imageobject1 = [];

            for (i = 0; i < files.files.length; i++) {
                var reader = new FileReader();

			
	    
				
                reader.onload = function(event) {
					
//					console.log(event.target.result); baby
					const imagedata = event.target.result;
					
//                    $($.parseHTML('<img style="width:30%; padding: 20px;" id="imageurl">')).attr('src', event.target.result).appendTo('ul li#gallery');
					
					var ul = document.getElementById("gallery");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+imagedata+' style="width: 26%; margin-top: 10px; margin-left: 3%; object-fit: cover; float:left;" id="photosearchlist">';
        ul.appendChild(li);
					
						li.addEventListener('click',searchwebimage);
									
									function searchwebimage()
									{
									
										
										console.log(imagedata);
									
										
									}	
					
                }
				
			
//			
			
                reader.readAsDataURL(files.files[i]);
				imagemultiple=files.files[i];
				
//				console.log(imagemultiple);
				
		  imageobject1.push(
			  imagemultiple);
					
            }
			
//			console.log(imagemultiple);
			
//			$("#gallery").on('click', function(){
//			
//			console.log(imagemultiple);
////						
//		});
				
		
			
//        }
//		console.log(imageobject1);

    };
		
		
   
		
		var cropmodalcallingimage = document.getElementById('cropmodalcallingimage');
cropmodalcallingimage.style.display = "block";
		
//        imagesPreview(this, 'ul.gallery');
		
		
		
//    });
});
	
	
	 var lis = document.getElementById("gallery").getElementsByTagName('li');

    for (var i=0; i<lis.length; i++) {
        lis[i].addEventListener('click', doStuff, false);
    }

    function doStuff() {
        alert( this.innerHTML );
    }
	
	
	
//	0101 shabbu
	function  addnewsubmit()
	{
		
		
		var uniqueId = Math.random().toString(36).substring(2) 
               + (new Date()).getTime().toString(36);
		
		var name = document.getElementById('entcname1').value;
		var category = document.getElementById('category').value;
		var address = document.getElementById('address1').value;
		var placeid = document.getElementById('editplaceid').value;
		var offer = document.getElementById('offer').value;
		var description = document.getElementById('entdesc').value;
		var address = document.getElementById('address1').value;
		var exprydate = document.getElementById('expiraydate').value;
		var tersconditons = document.getElementById('tersconditons').value;
		var zipcode = document.getElementById('zipcode').value;
		var qrcode = document.getElementById('qrcode').value;
		var imagelink = document.getElementById('imagelink').value;
		var imageurl11 = document.getElementById('imageurl11').value;
		var logourl11 = document.getElementById('logourl11').value;
        var  priority = document.getElementById('priority').value;
		var trfl = document.getElementById('trfl').value;
		
//		const file = blob2;
		
		var file = [];
		file=imageobject1;
		
//		for (var i=0; i<file.length; i++)
//			{
//				
//				console.log(file[i]);
//				console.log(file[i].name);
//				console.log(i);
//				
//			}
		 
		const logofile = blob;	
		
		if(selectedlink==null)
			{
				
				
				if(logofile==null)
					{	
						
						if(file==null)
							{
								
								if(selectedlink2==null)
									{
										
//									alert('url logo url image');
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										var imageobject = [];
		  imageobject.push({
			  imageUrl:imageurl11
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			priority:priority,
			isPromoted:trfl,
			zipcode:zipcode,
			imagelogo:logourl11,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
										
										
									}
								else
									{
//										alert('right image from web and set url logo');
										
										 loader = document.getElementById("loader");
			loader.style.display = "block";	
										
										var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			zipcode:zipcode,
			priority:priority,
			isPromoted:trfl,
			imagelogo:logourl11,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
										
										
										
										
									}

									
							}
						
						else
							{
//								alert('right image from computer and set url logo');
								
								
								 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						
						 var thisRef;
		
			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded with exist url!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);  
		  
		  		
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			zipcode:zipcode,
			priority:priority,
			isPromoted:trfl,
			imagelogo:logourl11,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
		  
		  
		  
		  
		  
		  
		  
	  });

								
							}
						
					}
				else if (file==null)
						{
						 
							if(selectedlink2==null)
								{
									
//									alert('compute logo and set url');
									
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								
							 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					 
					 
				
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:imageurl11
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			priority:priority,
			isPromoted:trfl,
			zipcode:zipcode,
			imagelogo:url1,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });	
//		console.log(objToSubmit);
									
									
									
								}
							else
								{
									
//									alert('computer logo and selected2 web');
									 loader = document.getElementById("loader");
			loader.style.display = "block";	
									
									 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
					 
					 
				
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
									
					 
					 var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			zipcode:zipcode,
			imagelogo:url1,
		    priority:priority,
			isPromoted:trfl,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });
									
									
								}
							
						 }
			
				else
				{
//					alert('succeed from computer and computer'); gurug
//					
//					 loader = document.getElementById("loader");
//			loader.style.display = "block";
					
					console.log(file);
					var urlimage;
					  var imageobject = [];
					for (var i=0; i<file.length; i++)
			{
				
				
				const filee = file[i];
		
				const thisRef = firebase.storage().ref("/fieupload/"+filee+file[i].name+uniqueId);
			//put request upload file to firebase storage sonu
//				    console.log('image  upload!'+i);

  thisRef.put(filee).then(function(url) {
//	  
    console.log('image has been uploaded!');
	  
	   var  urlPromise1 = thisRef.getDownloadURL();
					 
	  urlPromise1.then(url => {	
		  
		   console.log(url);
		  
		 urlimage = url;
		
		  imageobject.push({
			  imageUrl:urlimage
		  });
		  
	  });
		   
  });	
				
				}
					
//					
				
					setTimeout(function(){
//					
					 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
							
		  console.log('logo has been uploaded done it!');
							
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	 
				console.log(imageobject);
					 
		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			priority:priority,
			isPromoted:trfl,
			zipcode:zipcode,
			imagelogo:url1,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
//		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
//		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					
		  
		   });	
							 });
//		console.log(objToSubmit);
					
				
					
					
						}, 9000);
				}
				
				
			}
		
		else if(selectedlink2==null)
			{
				
				if(file==null)
					{
						
//						alert('logo web and set url');
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						 var imageobject = [];
		  imageobject.push({
			  imageUrl:imageurl11
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			zipcode:zipcode,
			imagelogo:selectedlink,
			placeid:placeid,
			priority:priority,
			isPromoted:trfl,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
						
						
						
						
					}
				else
					{
						
						
//						alert('web logo and computer');
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						
						 var thisRef;
		
			 thisRef = firebase.storage().ref("/fieupload/"+file);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);  
		  
		  		
		 var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			zipcode:zipcode,
			priority:priority,
			isPromoted:trfl,
			imagelogo:selectedlink,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
		  
		  
		  
		  
		  
		  
		  
	  });
						
						
					}
				
				
				
			}
		else
			{
				
//				
//				alert('succeed web and web');
				
				 loader = document.getElementById("loader");
			loader.style.display = "block";	
				
				 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
				

		var objToSubmit = {
			address:address,
			cateogry:category,
			code:qrcode,
			imagelink:imagelink,
			offer:offer,
			zipcode:zipcode,
			priority:priority,
			isPromoted:trfl,
			imagelogo:selectedlink,
			placeid:placeid,
			expiryDate:exprydate,
			description:description,
			discalmer:tersconditons,
			name:name,
			image:imageobject,
			website:"google.com",
			place:selectedplace_get
			
			
			
		};
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
						
				
				
			}
		  
		
		
	
		
		
		
		
		
		
		
		
		
		
		
	}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	var loadFile = function(event) {
    var reader = new FileReader();
    reader.onload = function(){
      var output = document.getElementById('output');
		
	  var logocmra = document.getElementById('cmraeditlogo');
		
	 logocmra.style.visibility="visible";
      output.src = reader.result;
		
		output.style.zIndex="1";
		output.style.visibility="";
		
		
		
		var closingimagecopns = document.getElementById('close-image-coupons');
		    closingimagecopns.style.display="none";
		
		
    };
    reader.readAsDataURL(event.target.files[0]);
  };
	
	
//	This is for deal logo 200
	
	var loadFiledlogo = function(event) {
    var reader = new FileReader();
    reader.onload = function(){
      var deloutput = document.getElementById('deloutput');
      deloutput.src = reader.result;
		deloutput.style.zIndex="1";
		deloutput.style.visibility="visible";
		
		var deallogomodal = document.getElementById('deal-logo-modal');
		    deallogomodal.style.display="none";
		
		
    };
    reader.readAsDataURL(event.target.files[0]);
  };
	
	
	
	
	//	This is for deal logo 200 vikas on reader 3
	
//	var loadFiledlimage = function(event) {
//    var reader = new FileReader();
//    reader.onload = function(){
//      var dlimageoutput = document.getElementById('dlimageoutput');
//      dlimageoutput.src = reader.result;
//
//		dlimageoutput.style.zIndex="1";
//		dlimageoutput.style.visibility="visible";
//		
//		var deallogomodal = document.getElementById('deal-image-modal');
//		    deallogomodal.style.display="none";
//		
//		
//    };
//    reader.readAsDataURL(event.target.files[0]);
//  };
	
//	var loadFile1 = function(event) { zuhair

//    var reader = new FileReader();
//    reader.onload = function(){
//      var output1 = document.getElementById('output1');
//      output1.src = reader.result;
//		output1.style.zIndex="1";
//		output1.style.background="white";
//		output1.style.visibility="visible";
//		var imageiconslogo = document.getElementById('imageiconlogo');
//		 imageiconlogo.style.zIndex="2";
//		var chooptionclose = document.getElementById('close-chosoptn');
//		     chooptionclose.style.display="none";
//		
//		
//    };
//    reader.readAsDataURL(event.target.files[0]);
//  };
	
//	
//	var loadFile3 = function(event) {
//    var reader = new FileReader();
//    reader.onload = function(){
//      var output3 = document.getElementById('output3');
//      output3.src = reader.result;
//		output3.style.zIndex="1";
//    };
//    reader.readAsDataURL(event.target.files[0]);
//  };
////	
	
	
	   function httpGet(theUrl)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.setRequestHeader("Access-Control-Allow-Origin","*");
     xmlHttp.setRequestHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");
     xmlHttp.setRequestHeader('Access-Control-Allow-Credentials', 'true');

    xmlHttp.send( null );
    return xmlHttp.responseText;
}
	
	function zoomeExtends(){
  var bounds = new google.maps.LatLngBounds();
  if (markers.length>0) { 
      for (var i = 0; i < markers.length; i++) {
         bounds.extend(markers[i].getPosition());
        }    
        map.fitBounds(bounds);
    }

}
	
	// Sets the map on all markers in the array.
      function setMapOnAll(map) {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(map);
        }
      }
	
	
	// Deletes all markers in the array by removing references to them.
      function deleteMarkers() {
		  
		  setMapOnAll(null);
          markers = [];
		  
      }
	
	
	var markers = [];
	
	function function2()
	{
		
		var local = selectedlink;
		console.log(local);
	}
	
	
	
	
	function delsubmit()
	
	{
		

		
	
		
		var uniqueId = Math.random().toString(36).substring(2) 
               + (new Date()).getTime().toString(36);
		
		var deloffer = document.getElementById('deloffer');
		var deldescription = document.getElementById('deldescription');
		var delexpirydate = document.getElementById('delexpirydate');
		var delcondtions = document.getElementById('delcondtions');
		var delzipcode = document.getElementById('delzipcode').value;
		var delqrcode = document.getElementById('delqrcode');
		var delimagelink = document.getElementById('delimagelink');
		var rimgeurlmpapi = document.getElementById('rimgeurlmpapi').value;
//		var logodel = document.getElementById('dealogo').files[0];
//		var dealimage = document.getElementById('dlimage').files[0];
		var logodel = blob4;
		var dealimage = blob3;
		
	
		
		if( $('#deloffer').val().length === 0 ) {
			
			var deloffer = document.getElementById('deloffer');
			    deloffer.style.border="4px solid red";
			
        alert('Please select offer');
			return;
		}

		
		if( $('#deldescription').val().length === 0 ) {
			var deldescription = document.getElementById('deldescription');
			    deldescription.style.border="4px solid red";
        alert('Please select description');
			return;
		}
		
		if( $('#delexpirydate').val().length === 0 ) {
			var delexpirydate = document.getElementById('delexpirydate');
			    delexpirydate.style.border="4px solid red";
        alert('please select expiry date');
			return;
		}
		
		
		if( $('#delzipcode').val().length === 0 ) {
			var delzipcode = document.getElementById('delzipcode');
			    delzipcode.style.border="4px solid red";
        alert('please select zipcode');
			return;
		}
		
		if( $('#delqrcode').val().length === 0 ) {
			var delqrcode = document.getElementById('delqrcode');
			    delqrcode.style.border="4px solid red";
        alert('please select qurcode');
			return;
		}
	
		
		
		
		
		if(selectedlink3==null)
			{
				
				if(logodel==null)//	from computer logo modal
					{	
						
						alert('Please select an image');
					}
				
				else if(dealimage==null)//	from computer image modal
					
					{
						
						if(selectedlink4==null)// from web for image modal
							{
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								 var thisRef;
			 thisRef = firebase.storage().ref("/dealimageupload/"+dealogo+uniqueId);
							//put request upload file to firebase storage
  thisRef.put(logodel).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);	
								
								
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:rimgeurlmpapi
		  });
			
			
			placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					
					var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:delqrcode.value,
			imagelink:delimagelink.value,
			offer:deloffer.value,
			expiryDate:delexpirydate.value,
			description:deldescription.value,
			placeid:placeid,
			discalmer:delcondtions.value,
			imagelogo:url,
			zipcode:delzipcode,
			delimagelink:delimagelink,
			image:imageobject,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/deals_new/' + delzipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+delzipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+delzipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
	  });
  });
								
								
							}
						
						else
							{ // this is for uploading computer from computer logo and image from web.
							
									
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								 var thisRef;
			 thisRef = firebase.storage().ref("/dealimageupload/"+dealogo+uniqueId);
							//put request upload file to firebase storage
  thisRef.put(logodel).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);	
								
								
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
				
			
			
			placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					
					var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:delqrcode.value,
			imagelink:delimagelink.value,
			offer:deloffer.value,
			expiryDate:delexpirydate.value,
			description:deldescription.value,
			placeid:placeid,
			discalmer:delcondtions.value,
			imagelogo:url,
			zipcode:delzipcode,
			delimagelink:delimagelink,
			image:imageobject,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/deals_new/' + delzipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+delzipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+delzipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
	  });
  });
								
							}
						
						
						
//						alert('Please select an image');
						
					}
				else
					{
						
						
						
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						
						var  thisRef1
		 thisRef1 = firebase.storage().ref("/dealimageupload/"+dealogo+uniqueId);
						
						 var thisRef;
			 thisRef = firebase.storage().ref("/dealimagelogo/"+dealimage+uniqueId);
						
						
			//put request upload file to firebase storage
  thisRef1.put(logodel).then(function(url1) {
	  
    console.log('logo has been uploaded google but!');
	  
	  
	 var urlPromise1 = thisRef1.getDownloadURL();
	  urlPromise1.then(url1 => {
	  	  console.log(url1);
		
					
						
			//put request upload file to firebase storage
  thisRef.put(dealimage).then(function(url) {
	  
    console.log('image has been uploaded googli!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);
		
		  var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
							
							 
		
		placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
					 
		  
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:delqrcode.value,
			imagelink:delimagelink.value,
			offer:deloffer.value,
			expiryDate:delexpirydate.value,
			description:deldescription.value,
			discalmer:delcondtions.value,
			imagelogo:url1,
			placeid:placeid,
			zipcode:delzipcode,
			delimagelink:delimagelink,
			image:imageobject,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/deals_new/' + delzipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+delzipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";	
			
	}
			
	else{
				

		firebase.database().ref('deals_new/'+delzipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	
//
			  });	
						
					});
	  });
		  		});
	  });
	  
			
		  			
						
						
						
						
					}
				
				
//				alert('Please fill get the image');
			
				
				
			}
		
		else if(selectedlink4==null)
			
			{
				
				if(dealimage==null)
				{
					
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
					
					 var imageobject = [];
		  imageobject.push({
			  imageUrl:rimgeurlmpapi
		  });
//				
			
			
			placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					
					var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:delqrcode.value,
			imagelink:delimagelink.value,
			offer:deloffer.value,
			expiryDate:delexpirydate.value,
			description:deldescription.value,
			discalmer:delcondtions.value,
			imagelogo:selectedlink3,
		    placeid:placeid,
			zipcode:delzipcode,
			delimagelink:delimagelink,
			image:imageobject,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/deals_new/' + delzipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+delzipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+delzipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
				}
				
				else
					{
						
						
							
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
						 var dellthisRef;
			 dellthisRef = firebase.storage().ref("/dealimageupload/"+dlimage+uniqueId);
							//put request upload file to firebase storage
						
  dellthisRef.put(dealimage).then(function(urldel) {
	  
    console.log('image has been uploaded!');
	  
	 var urlPromise = dellthisRef.getDownloadURL();
	  urlPromise.then(urldel => {
	  	  console.log(urldel);	
								
								
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:urldel
		  });
//				
			
			
			placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					
					var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:delqrcode.value,
			imagelink:delimagelink.value,
			offer:deloffer.value,
			expiryDate:delexpirydate.value,
			description:deldescription.value,
			discalmer:delcondtions.value,
			imagelogo:selectedlink3,
		    placeid:placeid,
			zipcode:delzipcode,
			delimagelink:delimagelink,
			image:imageobject,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/deals_new/' + delzipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+delzipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+delzipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });
	  });
  });
//						
						
					}
				
				
				
//				alert('plaase fill get the image ');
			}
		
		
		else
			{
				
				 loader = document.getElementById("loader");
			loader.style.display = "block";	
						
		
		
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink4
		  });
				
			
			
			placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					
					var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:delqrcode.value,
			imagelink:delimagelink.value,
			offer:deloffer.value,
			expiryDate:delexpirydate.value,
			description:deldescription.value,
			discalmer:delcondtions.value,
			imagelogo:selectedlink3,
			zipcode:delzipcode,
			placeid:placeid,
			delimagelink:delimagelink,
			image:imageobject,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
		};
		
		
		
		firebase.database().ref('/deals_new/' + delzipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('deals_new/'+delzipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('deals_new/'+delzipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
//		console.log(objToSubmit);
			
			
} //		This is else for slectedlink3-4
	
		
		
	}//	This is delsubmit funciton end 700	
	
	
	
	function submitdata()
	
	{
		
////console.log(httpGet('https://maps.googleapis.com/maps/api/place/nearbysearch/json?name=g&rankby=distance&sensor=false&location='+pos.lat+'%2C'+pos.lng+'&key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&keyword=g'));
////		
//		
//		/*address: 
//"7007 Friars Rd Suite 534, San Diego 92130"
//cateogry: 
//"jewelry_store"
//code: 
//"15OFFWATCHES"
//description: 
//"Enter this coupon code at checkout to get an ex..."
//discalmer: 
//" Restrictions may apply."
//id: 
//"5d12f2d3-0d05-438d-9558-626f8e110bf5"
//image
//name: 
//"Kay Jewelers"
//place
//website: 
//"https://www.kay.com/en/kaystore"*/
//		
//		
	
		
		
		
		var uniqueId = Math.random().toString(36).substring(2) 
               + (new Date()).getTime().toString(36);
		console.log(selectedlink2);
		
		var offer = document.getElementById('offer');
		var description = document.getElementById('entdesc');
		var exprydate = document.getElementById('expiraydate').value;
		var offerdesc = document.getElementById('tersconditons');
		var zipcode = document.getElementById('zipcode').value;
		var  priority = document.getElementById('priority').value;
		 var trfl = document.getElementById('trfl').value;
		var qrcode = document.getElementById('qrcode');
		var imagelink = document.getElementById('imagelink');
		var urlimagelogo = document.getElementById('urlimagelogo');
		var webimagepai = document.getElementById('selectapiimage').value;
//		var file = document.getElementById('files').files[0];
//		var logofile = document.getElementById('filelogo').files[0];
		var file = blob2;
		var logofile = blob;

		

		var exprydate1 = document.getElementById('expiraydate');
		var zipcode1 = document.getElementById('zipcode');
		
			        offer.style.border="2px solid white";
			        description.style.border="2px solid white";
		
		            exprydate1.style.border="2px solid white";
			        zipcode1.style.border="2px solid white";
		
		
		
		
		
		if(offer.value=="")
			
			{
				
		     offer.style.border="2px solid red";
				alert('Please fill the offer');
				return;
				
			}
		
		if(description.value=="")

			
			{
				
				description.style.border="2px solid red";
				alert('Please fill the description');
				return;
				
			}
		
		if(exprydate1.value=="")
			
			{
				
				exprydate1.style.border="2px solid red";
				alert('Please fill the date');
				return;
				
			}
		
		if(zipcode1.value=="")
			
			{
				
				zipcode1.style.border="2px solid red";
				alert('Please fill the zipcode');
				return;
				
			}
		
		
		
		else
			{
			
				if(qrcode.value==0){
					
					if(imagelink.value == 0){
			
						imagelink.style.border="2px solid red";
						qrcode.style.border="2px solid red";
						alert('Please fill Coupon code or put QR image link!');
						return;
						
					}else{
						// do nothing
					}
					
				}else{
					
					// do nothing
				}
			}
				
//		console.log(file);
//		console.log(logofile);

		
		if(selectedlink==null)
			
			{
				
				if(logofile==null)
					{	
							
						alert('Please Select image from web or local computer');
				         return;
						
					}
				
				else if (file==null)
					{
						
						
						if(selectedlink2==null)
							{
								
//								alert('please slect an image from web goodone');
								
							 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								
							 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
									
								
								placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  	 
		  var imageobject = [];
		  imageobject.push({
			  imageUrl:webimagepai
		  });
					 
					 
					 
   //returns true
					 
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:qrcode.value,
			imagelink:imagelink.value,
			offer:offer.value,
			priority:priority,
			isPromoted:trfl,
			imagelogo:url1,
			zipcode:zipcode,
			placeid:placeid,
			expiryDate:exprydate,
			description:description.value,
			discalmer:offerdesc.value,
			id:uniqueId,
			name:selectedGooglePlace.name,
			image:imageobject,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });	
								
							}
						
						else
							{
								
//								alert('testing4');
								
								 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
								
							 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
		  console.log('logo has been uploaded!');
			  
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	
								
								
								
								placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					 
					 
		  var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
					 
					 
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:qrcode.value,
			imagelink:imagelink.value,
			offer:offer.value,
			priority:priority,
			isPromoted:trfl,
			imagelogo:url1,
			zipcode:zipcode,
			placeid:placeid,
			expiryDate:exprydate,
			description:description.value,
			discalmer:offerdesc.value,
			id:uniqueId,
			name:selectedGooglePlace.name,
			image:imageobject,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
					  });	
							 });	
//		console.log(objToSubmit);
								
								
								
							}
						
					}
				
				else 
					{	
						
//						alert('tsting3');
					
						 loader = document.getElementById("loader");
			             loader.style.display = "block";	
						
						
						
						 var thisRef;
		
			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage vijay
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  	 var  thisRef1;
			thisRef1 = firebase.storage().ref("/logoimage/"+filelogo+uniqueId);
						
						thisRef1.put(logofile).then(function(url1) {
							
		  console.log('logo has been uploaded done it!');
							
			   var urlPromise1 = thisRef1.getDownloadURL();
		  
	             urlPromise1.then(url1 => {	

	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);

			
		
		  var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
							
					
					 
		
		placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
					 
		  
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:qrcode.value,
			imagelink:imagelink.value,
			offer:offer.value,
			imagelogo:url1,
			priority:priority,
			isPromoted:trfl,
			zipcode:zipcode,
			image:imageobject,
			placeid:placeid,
			expiryDate:exprydate,
			description:description.value,
			discalmer:offerdesc.value,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";	
			
	}
			
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
						
					});
	  });
	  });
	  });
		  
		  
		  
//		console.log(objToSubmit);
						
						
					}//				else Ending for computer upload
				
			}
		
		else if(selectedlink2==null)
				{
				
					if(file==null)
						{
							
							
							 loader = document.getElementById("loader");
			loader.style.display = "block";	
								
							
								placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
		  
					 
					 
		  var imageobject = [];
		  imageobject.push({
			  imageUrl:webimagepai
		  });
					 
					 
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:qrcode.value,
			imagelink:imagelink.value,
			offer:offer.value,
			priority:priority,
			isPromoted:trfl,
			imagelogo:selectedlink,
			zipcode:zipcode,
			placeid:placeid,
			expiryDate:exprydate,
			description:description.value,
			discalmer:offerdesc.value,
			id:uniqueId,
			name:selectedGooglePlace.name,
			image:imageobject,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });		
							
						}
					
					else
					{
						
//						alert('tsting');
						
						 loader = document.getElementById("loader");
			loader.style.display = "block";	
							
						 var thisRef;
		
			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
			//put request upload file to firebase storage
  thisRef.put(file).then(function(url) {
	  
    console.log('image has been uploaded!');
	  
	  
	 var urlPromise = thisRef.getDownloadURL();
	  urlPromise.then(url => {
	  	  console.log(url);

			
		
		  var imageobject = [];
		  imageobject.push({
			  imageUrl:url
		  });
						
					 
		
		placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
					 
		  
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:qrcode.value,
			imagelink:imagelink.value,
			offer:offer.value,
			imagelogo:selectedlink,
			zipcode:zipcode,
			priority:priority,
			isPromoted:trfl,
			placeid:placeid,
			image:imageobject,
			expiryDate:exprydate,
			description:description.value,
			discalmer:offerdesc.value,
			id:uniqueId,
			name:selectedGooglePlace.name,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";	
			
	}
			
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
						
					});
	
			});
		  
						
						
						
						
						
						
					}
					
				}
		else			
		{	
			
//			alert('testing6');
//			haroon
			
//			loader = document.getElementById("loader");
//			loader.style.display = "block";	
//									
//						 var thisRef;
//		
//			 thisRef = firebase.storage().ref("/fieupload/"+file+uniqueId);
//			//put request upload file to firebase storage vijay
//  thisRef.put(file).then(function(url) {
//	  
//    console.log('image has been uploaded!');
//	  
//	  	
//	 var urlPromise = thisRef.getDownloadURL();
//	  urlPromise.then(url => {
//	  	  console.log(url);
//			
			 var imageobject = [];
		  imageobject.push({
			  imageUrl:selectedlink2
		  });
//				
			
			
		placeid = selectedGooglePlace.place_id;
		address = selectedGooglePlace.formatted_address;
			
			
			
		var objToSubmit = {
			address:address,
			cateogry:selectedGooglePlace.types[0],
			code:qrcode.value,
			imagelink:imagelink.value,
			offer:offer.value,
			zipcode:zipcode,
			priority:priority,
			isPromoted:trfl,
			imagelogo:selectedlink,
			placeid:placeid,
			expiryDate:exprydate,
			description:description.value,
			discalmer:offerdesc.value,
			id:uniqueId,
			name:selectedGooglePlace.name,
			image:imageobject,
			website:"google.com",
			place:selectedGooglePlace
			
			
			
		};
		
		
		
		firebase.database().ref('/coupons_new/' + zipcode+'/'+placeid).once('value').then(function(snapshot) {
 
	
	var arr = snapshot.val();
	if(arr==null ||arr.length ==0){
		
	
//  firebase.database().ref('coupons_new/'+33333+'/' + selectedGooglePlace.place_id).set(JSON.parse(JSON.stringify(objToSubmit)));
  firebase.database().ref('coupons_new/'+zipcode+'/' + placeid+'/'+0).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
		
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}
	else{
				

		firebase.database().ref('coupons_new/'+zipcode+'/'+placeid+'/' + arr.length).set(JSON.parse(JSON.stringify(objToSubmit)));
		alert('Successfully Added!');
		window.location.href = "creatingcoupons.html";
			
		  loader = document.getElementById("loader");
			loader.style.display = "none";
		
			
	}	

			  });	
		  
//		console.log(objToSubmit);
			
			
		}//		else ending here for urllink 
		

		
		
		
//		This is for the image of coupons 20019
		
		
		
		
		
	}//	This is submit funciton end 

	
	
	
	
		var selectedGooglePlace = null;

	
	document.getElementById('getlist').addEventListener('click', function() {
          
		var photoss;
		
          
							if(selectedGooglePlace==null)
								{
									alert('Please Select any place');
									return;
								}
									
		                      document.getElementById('entcname').value = selectedGooglePlace.name;
							  document.getElementById('entcname1').value = selectedGooglePlace.name;
		                      document.getElementById('entcname3').value = selectedGooglePlace.name;
							  document.getElementById('address1').value = selectedGooglePlace.formatted_address;
							  document.getElementById('category').value = selectedGooglePlace.types[0];
		
		
//		This is for deals
		
		
		                      document.getElementById('delcomname').value = selectedGooglePlace.name;
		                      document.getElementById('delcate').value = selectedGooglePlace.types[0];
		                      document.getElementById('deladdress').value = selectedGooglePlace.name;
		                      document.getElementById('delplaceid').value = selectedGooglePlace.place_id;
		                      
		
		
		
		if(selectedGooglePlace.photos!=null && selectedGooglePlace.photos.length>=1){
			
			
			        photoss = selectedGooglePlace.photos[0].getUrl();
			     selectedGooglePlace.photos[0].photo_reference=photoss;

		   }
		
		else {
			
//			   photos = place.icon;
			
		   }
		
//		                      document.getElementById("myImg").src = photoss; anaskhan
		 document.getElementById("output").src = photoss;
		var copnsimage = document.getElementById("output");
		    copnsimage.style.visibility="visible";
		
		 document.getElementById("selectapiimage").value = photoss;
		   
		
		var cmraeditlogo = document.getElementById("cmraeditlogo");
		    cmraeditlogo.style.visibility="visible";
		
		                 
						      document.getElementById("dlimageoutput").src = photoss;
		var dlimageoutput = document.getElementById("dlimageoutput");
		    dlimageoutput.style.zIndex="0";
		
		 document.getElementById("rimgeurlmpapi").value = photoss;
		
							y = document.getElementById("bodysearch1");
			                             y.style.display = "none";
                                     modal.style.display = "none";	
		
        });
	
	document.getElementById('xclosemodal').addEventListener('click', function() {
	
  modal.style.display = "none";		
        });
	document.getElementById('modalcalling').addEventListener('click', function() {
          

modal.style.display = "block";		
        });
	
	
	
	/* Note: This example requires that you consent to location sharing when
     * prompted by your browser. If you see the error "Geolocation permission
     * denied.", it means you probably did not give permission for the browser * to locate you. */
    let pos;
    let map;
    let bounds;
    let infoWindow;
    let currentInfoWindow;
    let service;
    let infoPane;
	
	
	function removeAllMarkers() {
  map.data.forEach((feature) => {
    feature.getGeometry().getType() === 'Point' ? map.data.remove(feature) : null
  });
}
	
	
    function initMap()
	  {
		  
      // Initialize variables
      bounds = new google.maps.LatLngBounds();
      infoWindow = new google.maps.InfoWindow;
      currentInfoWindow = infoWindow;
      infoPane = document.getElementById('panel');
      // Try HTML5 geolocation
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          pos = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
          };
			
			
				
			
			
          map = new google.maps.Map(document.getElementById('map'), {
            center: pos,
            zoom: 15
          });
			
			
			var input = document.getElementById('listsearch');
			var autocomplete = new google.maps.places.Autocomplete(input);
			
			autocomplete.bindTo('bounds', map);
        // Set the data fields to return when the user selects a place.
            autocomplete.setFields(
            ['address_components', 'geometry', 'icon', 'name']);
			
		
			
			var modaldddress = document.getElementById('address');
			var autocomplete2 = new google.maps.places.Autocomplete(modaldddress);
			
			autocomplete2.bindTo('bounds', map);
        // Set the data fields to return when the user selects a place.
            autocomplete2.setFields(
            ['address_components', 'geometry', 'icon', 'name']);
			
			

			
			 autocomplete.addListener('place_changed', function() { 
				 
				 var searlist = document.getElementById('listsearch').value;
            document.getElementById('address').value = searlist;
				 
				 
				 
				var modalmap =  document.getElementById('myModal');
				 modalmap.style.display="block";
				 
				 searchlist();
			   
		   });
			
			
          bounds.extend(pos);
          infoWindow.setPosition(pos);
          infoWindow.setContent('Your Location.');
          infoWindow.open(map);
          map.setCenter(pos);
          // Call Places Nearby Search on user's location
          
        }, () => {
          // Browser supports geolocation, but user has denied permission
          handleLocationError(true, infoWindow);
        });
      } else {
        // Browser doesn't support geolocation
        handleLocationError(false, infoWindow);
      }
		  
		  document.getElementById('submit').addEventListener('click',searchlist);
		  
		  
       function searchlist() {
		   
			var address = document.getElementById('address').value;
			if(address=="")
				{
					alert('please search something');
					return;
				}
			
			deleteMarkers();
			
			selectedGooglePlace = null;
		   
			
			list = document.getElementById("dynamic-list");
			
			for (var i=document.getElementById("dynamic-list").getElementsByTagName("li").length-1; i>=0; i--)
				{
					
					var itemview = document.getElementById("dynamic-list").getElementsByTagName("li")[i];
					list.removeChild(itemview);
					
								console.log(' remove'+i);

				}
			
			
		    getNearbyPlaces(pos);
			
			
        };
    }
	
    // Handle a geolocation error
    function handleLocationError(browserHasGeolocation, infoWindow) {
		
      // Set default location to Sydney, Australia
      pos = { lat: -33.856, lng: 151.215 };
      map = new google.maps.Map(document.getElementById('map'), {
        center: pos,
        zoom: 15
      });
		
		
      // Display an InfoWindow at the map center
      infoWindow.setPosition(pos);
      infoWindow.setContent(browserHasGeolocation ?
        'Geolocation permissions denied. Using default location.' :
        'Error: Your browser doesn\'t support geolocation.');
      infoWindow.open(map);
      currentInfoWindow = infoWindow;
      // Call Places Nearby Search on the default location
      getNearbyPlaces(pos);
		

    }
	
	
	//scoll
	
	
	
    // Perform a Places Nearby Search Request
    function getNearbyPlaces(position) {
      let request = {
        location: map.center,
        rankBy: google.maps.places.RankBy.DISTANCE,
        query: document.getElementById('address').value
      };
      service = new google.maps.places.PlacesService(map);
      service.textSearch(request, nearbyCallback);
		console.log('nearby places called');
		
    }
    // Handle the results (up to 20) of the Nearby Search
    function nearbyCallback(results, status) {
		console.log(status);
      if (status == google.maps.places.PlacesServiceStatus.OK) {
		  console.log('ok');
		  
			  y = document.getElementById("content-list-list");
			  y.style.display = "block";
        createMarkers(results);
      }
		else
			{
				alert('Please Enter valid address');
				return;
			}
    }
	
    // Set markers at the location of each place result
    function createMarkers(places) {
      places.forEach(place => {
        let marker = new google.maps.Marker({
          position: place.geometry.location,
          map: map,
          title: place.name
        });
		  
		  
		  markers.push(marker);
		  
		  console.log(place.place_id);

		  marker.set('place_id', place.place_id);

		  console.log(place);
		  
		  var photos;
		  
		   if(place.photos!=null &&place.photos.length>=1){
			   
			        photos = place.photos[0].getUrl();

		   }else {
			   
			   photos = place.icon;
			   
		   }
		  
		  
    var name = place.name;
    var address = place.formatted_address;
    var placeid = place.place_id;
   
		  
		  
		  
		  var ul = document.getElementById("dynamic-list");
		  var li=document.createElement('li');
        li.innerHTML='<img src='+photos+' style="float:left; width: 22%; height: 53px; margin-top: 10px; margin-left: 10px;" id="photosearchlist">'+'<p style="float: left; margin-top: 10px; font-size: 19px; width: 73%; height: auto;" id="namesearchlist">'+name+'</p>'+'<p style="float: right; margin-top: -32px; font-size: 13px; width: 74%; margin-top: 0px; height: auto;" id="addresssearchlist">'+address+'</p>';
        ul.appendChild(li);
		  
		  
		  
		li.addEventListener('click', function(evt) {

		for (var i=0; i<places.length; i++)
				{
					var place= places[i];

					
					if(placeid==place.place_id){
					
						
						var lis = document.getElementById("dynamic-list").getElementsByTagName("li");
						var itemview = lis[i];
						
						
						itemview.style.background="#11C1FF";
					    itemview.style.color="white";
						
						selectedGooglePlace=place;
         showDetails(selectedGooglePlace.formatted_address,selectedGooglePlace, marker, google.maps.places.PlacesServiceStatus.OK)
						 
						
						
					}
					else 
						{
							var lis = document.getElementById("dynamic-list").getElementsByTagName("li");
						var itemview = lis[i];
						console.log(itemview);
						itemview.style.background="white";
							itemview.style.color="black";
							
						}
					
				}
			
		});
		  
//		  li.click(function(
//				  {
//					  
//					
//					  
//					    
//					 
//					  
//					  
//					  
//				  }));
		  
		  
	  
		 
        // Add click listener to each marker
        google.maps.event.addListener(marker, 'click', () => {
          let request = {
           placeId: placeid,
           fields: ['name', 'formatted_address', 'geometry', 'rating',
            'website', 'photos']
};
          /* Only fetch the details of a place when the user clicks on a marker.
           * If we fetch the details for all place results as soon as we get
           * the search response, we will hit API rate limits. */
       service.getDetails(request, (placeResult, status) => {
         showDetails(address,placeResult, marker, status)
       });
			
			
			
			for (var i=0; i<places.length; i++)
				{
					
					var place= places[i];

					if(marker.get('place_id')==place.place_id){
					
						
						var lis = document.getElementById("dynamic-list").getElementsByTagName("li");
						var itemview = lis[i];
						
						
						itemview.style.background="#11C1FF";
					    itemview.style.color="white";
						
						itemview.scrollIntoView();
						
						
					}
					else 
						{
							var lis = document.getElementById("dynamic-list").getElementsByTagName("li");
						var itemview = lis[i];
						console.log(itemview);
						itemview.style.background="white";
							itemview.style.color="black";
							
						}
					
				}
			
			
        });
        // Adjust the map bounds to include the location of this marker
//        bounds.extend(place.geometry.location);
      });
      /* Once all the markers have been placed, adjust the bounds of the map to
       * show all the markers within the visible area. */
//      map.fitBounds(bounds);
		zoomeExtends();
    }
	
	
    // Builds an InfoWindow to display details above the marker
    function showDetails(address,placeResult, marker, status) {
      if (status == google.maps.places.PlacesServiceStatus.OK) {
        let placeInfowindow = new google.maps.InfoWindow();
        let rating = "None";
        if (placeResult.rating) rating = placeResult.rating;
        placeInfowindow.setContent('<div><strong>' + placeResult.name +
          '</strong><br>' + '' + address + '</div>');
        placeInfowindow.open(marker.map, marker);
        currentInfoWindow.close();


        currentInfoWindow = placeInfowindow;
        //showPanel(placeResult);
      } else {
        console.log('showDetails failed: ' + status);
      }
    }
    // Displays place details in a sidebar
    function showPanel(placeResult) {
      // If infoPane is already open, close it
      if (infoPane.classList.contains("open")) {
        infoPane.classList.remove("open");
      }
      // Clear the previous details
      while (infoPane.lastChild) {
        infoPane.removeChild(infoPane.lastChild);
      }
      // Add the primary photo, if there is one
      if (placeResult.photos) {
        let firstPhoto = placeResult.photos[0];
        let photo = document.createElement('img');
        photo.classList.add('hero');
        photo.src = firstPhoto.getUrl();
        infoPane.appendChild(photo);
      }
      // Add place details with text formatting
      let name = document.createElement('h1');
      name.classList.add('place');
      name.textContent = placeResult.name;
      infoPane.appendChild(name);
      if (placeResult.rating) {
        let rating = document.createElement('p');
        rating.classList.add('details');
        rating.textContent = `Rating: ${placeResult.rating} \u272e`;
        infoPane.appendChild(rating);
      }
      let address = document.createElement('p');
      address.classList.add('details');
      address.textContent = placeResult.formatted_address;
      infoPane.appendChild(address);
      if (placeResult.website) {
        let websitePara = document.createElement('p');
        let websiteLink = document.createElement('a');
        let websiteUrl = document.createTextNode(placeResult.website);
        websiteLink.appendChild(websiteUrl);
        websiteLink.title = placeResult.website;
        websiteLink.href = placeResult.website;
        websitePara.appendChild(websiteLink);
        infoPane.appendChild(websitePara);
      }
      // Open the infoPane
      infoPane.classList.add("open");
    }
	
	
// Get the modal
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");



// When the user clicks the button, open the modal 
btn.onclick = function() {
  modal.style.display = "block";
}


// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

var check = false;
window.onpopstate = function() {
//       alert("clicked back button");
	
	if(modal.style.display=="block")
		{
			modal.style.display = "none";
		}
	
	else
		{
	
	
  y = document.getElementById("cuponscodeQR");
			
	
	if(y.style.display=="block")
		{
			y.style.display = "none";
			
			y = document.getElementById("mainconainercup");
			y.style.display = "block";
		}
			
	else
		{
	
	y = document.getElementById("mainconainercup");
	if(y.style.display="block")
		{
			y.style.display = "none";
			y = document.getElementById("bodysearch1");
			y.style.display = "block";
		}
	}
	}
	
    }; history.pushState({}, '');
	

</script>
	
<p id="test">test</p>
	
	
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCM641AP5CCKjh30Z1_p8tEj-PccFZdx50&libraries=places&callback=initMap">
  </script>
	
	
	
<!--
<script type="text/jscript" src="js/couponsfirebase.js"></script>	  
-->
<script type="text/jscript" src="js/creatingcoupos.js"></script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

  </body>

